var Qt=Object.defineProperty,Xt=Object.defineProperties;var Kt=Object.getOwnPropertyDescriptors;var $t=Object.getOwnPropertySymbols;var ea=Object.prototype.hasOwnProperty,ta=Object.prototype.propertyIsEnumerable;var Pt=(s,a,t)=>a in s?Qt(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,be=(s,a)=>{for(var t in a||(a={}))ea.call(a,t)&&Pt(s,t,a[t]);if($t)for(var t of $t(a))ta.call(a,t)&&Pt(s,t,a[t]);return s},Lt=(s,a)=>Xt(s,Kt(a));import{bl as it,bm as aa,s as _,r as h,c as g,v as x,b as n,e as c,g as Ot,y as ce,u as e,k as l,p as q,w as M,l as de,f,i as me,_ as he,m as C,n as H,A as sa,bn as la,t as oa,bo as na,bp as ia,aW as Me,aP as ve,b7 as Ne,as as rt,d as W,bq as Ge,bd as zt,j as xe,aa as Be,x as pe,F as ae,aZ as st,br as lt,ao as Qe,bs as Ze,am as Xe,ay as ot,ax as nt,C as ke,L as ye,a3 as Bt,a as Fe,aU as ra,aR as Pe,b6 as Ee,ag as Ie,bt as wt,b4 as Ce,bu as ca,b5 as Re,H as ue,J as Ke,K as Te,z as He,aX as It,aY as Et,bv as ua,bw as da,bx as et,by as At,D as tt,bz as ft,bf as ze,bA as jt,h as Nt,at,bB as dt,ar as pa,an as ma,bC as _a,bD as St,bE as Dt,b8 as Le,bF as ga,aH as fa,b3 as va,bG as ba,bH as vt,bI as bt,au as ha,bJ as ya,bK as ka,bL as xa,ad as Ca,ai as Ta}from"./stepForm.3dffd51a.js";import{e as $a,f as Se,m as Pa}from"./eventListForm.ad737c46.js";import{a as La,_ as Ae}from"./catalogForm.a5a6f26e.js";function $e(s,a){let t=a!==""?JSON.parse(s.translations)[a]:JSON.parse(s.translations);if(it in t)return t[it];let o=Object.keys(t),i=Object.keys(t).map(m=>m.length>2?m.slice(0,2):m),d="";for(let m=0;m<i.length;m++){if(aa===o[m]&&t[o[m]]){d=t[o[m]];break}i[m]===it&&t[o[m]]&&(d=t[o[m]])}return d}function ct(s,a){return s.translations&&JSON.parse(s.translations)[a]&&$e(s,a)?$e(s,a):s[a]}function we(s){return s.translations&&JSON.parse(s.translations).name&&$e(s,"name")?$e(s,"name"):s.name}function wa(s){return s.translations&&$e(s,"")?$e(s,""):s.name}function Cr(s){return s.translations&&$e(s,"")?$e(s,""):s.content}function Sa(s){return s.translations&&$e(s,"name")?$e(s,"name"):s.label}function Da(s){return s.translations&&$e(s,"")?$e(s,""):s.label}function Oe(s){return s.translations&&JSON.parse(s.translations).description&&$e(s,"description")?$e(s,"description"):s.description}function Tr(s){s.services&&s.services.length&&s.services.forEach(a=>{a.name=we(a),a.description=Oe(a),a.extras.forEach(t=>{t.name=we(t),t.description=Oe(t)})}),s.locations&&s.locations.length&&s.locations.forEach(a=>{a.name=we(a),a.description=Oe(a)}),s.packages&&s.packages.length&&s.packages.forEach(a=>{a.name=we(a),a.description=Oe(a),a.bookable.forEach(t=>{t.service.name=we(t.service),t.service.description=Oe(t.service),"extras"in t.service&&t.service.extras.forEach(o=>{o.name=we(o),o.description=Oe(o)})})}),s.categories&&s.categories.length&&s.categories.forEach(a=>{a.name=we(a),a.serviceList.forEach(t=>{t.name=we(t),t.description=Oe(t),t.extras.forEach(o=>{o.name=we(o),o.description=Oe(o)})})}),s.events&&s.events.length&&s.events.forEach(a=>{a.name=we(a),a.description=Oe(a),a.extras.forEach(t=>{t.name=we(t),t.description=Oe(t)})}),s.customFields&&s.customFields.length&&s.customFields.forEach(a=>{a.label=Sa(a),a.options.forEach(t=>{t.label=Da(t)})}),s.employees&&s.employees.length&&s.employees.forEach(a=>{a.firstName=ct(a,"firstName"),a.lastName=ct(a,"lastName"),a.description=ct(a,"description")})}const Fa={props:{ready:{type:Boolean,default:!0}},setup(s){let a=_("amColors",h({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),t=g(()=>({"--am-c-caph-text":a.value.colorMainText,"--am-c-caph-heading-text":a.value.colorMainHeadingText,"--am-c-caph-text-op15":x(a.value.colorMainText,.15)}));return(o,i)=>(n(),c("div",{class:"am-caph__main",style:ce(e(t))},[Ot(o.$slots,"default")],4))}};const Ma={key:0},Oa={key:1},za={key:2},Ba={name:"MainProfileFooter"},Ia=Object.assign(Ba,{props:{parentWidth:{type:Number,default:1200},display:{type:String,default:"first"},loading:{type:Boolean,default:!1},customizedLabels:{type:Object,default:()=>({})},deleteFooterType:{type:String,default:"plain"},saveFooterButton:{type:String,default:"filled"},passFooterButton:{type:String,default:"filled"}},setup(s){const a=s,t=_("labels");function o(y){return Object.keys(a.customizedLabels).length&&a.customizedLabels[y]?a.customizedLabels[y]:t[y]}const i=_("settings");let d=_("deleteProfileDialog",h(!1)),m=_("saveProfileChanges",()=>{}),r=_("changeProfilePassword",()=>{}),p=_("amColors"),u=g(()=>({"--am-c-cappf-bgr":p.value.colorMainBgr,"--am-c-cappf-text":p.value.colorMainText,"--am-c-cappf-text-op15":x(p.value.colorMainText,.15)}));return(y,D)=>(n(),c("div",{class:"am-cappf",style:ce(e(u))},[l("div",{class:H(["am-cappf__options",{"am-only-one":s.display==="second"||!e(i).roles.allowCustomerDeleteProfile}])},[s.display==="first"&&e(i).roles.allowCustomerDeleteProfile?(n(),c("div",Ma,[q(he,{category:"danger",size:e(a).parentWidth<=360?"small":"default",type:e(a).deleteFooterType,class:"am-cappf__delete",disabled:s.loading,onClick:D[0]||(D[0]=$=>me(d)?d.value=!0:d=!0)},{default:M(()=>[de(f(o("delete_profile")),1)]),_:1},8,["size","type","disabled"])])):C("",!0),s.display==="first"?(n(),c("div",Oa,[q(he,{type:e(a).saveFooterButton,size:e(a).parentWidth<=360?"small":"default",disabled:s.loading,onClick:D[1]||(D[1]=$=>e(m)())},{default:M(()=>[de(f(o("save_changes")),1)]),_:1},8,["type","size","disabled"])])):C("",!0),s.display==="second"?(n(),c("div",za,[q(he,{type:e(a).passFooterButton,size:e(a).parentWidth<=360?"small":"default",disabled:s.loading,onClick:D[2]||(D[2]=$=>e(r)())},{default:M(()=>[de(f(o("change_password")),1)]),_:1},8,["type","size","disabled"])])):C("",!0)],2)],4))}});const Ea=l("span",{class:"am-icon-calendar"},null,-1),Aa={class:"am-date-picker__input-inner"},ja={class:"am-date-picker__input-start"},Na=l("span",{class:"am-date-picker__input-separator"}," - ",-1),Va={class:"am-date-picker__input-end"},Ya={props:{id:{type:String},modelValue:{type:[String,Array,Object,Number]},type:{type:String,default:"date"},defaultValue:{type:[String,Array,Object,Number]},valueFormat:{type:String},value:{type:[String,Array,Object,Number]},format:{type:String},editable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator(s){return["default","medium","small","mini","micro"].includes(s)}},clearable:{type:Boolean,default:!1},name:{type:String,default:""},placeholder:{type:String,default:"Select Date"},popperClass:{type:String,default:""},teleported:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:sa},prefixIcon:{type:[String,Object],default:la},disabledDate:{type:Function,default:()=>{}},lang:{type:String,default:""},customInputDisplay:{type:Boolean,default:!1}},emits:["change","input","visible-change","remove-tag","clear","blur","focus","calendar-change","update:modelValue"],setup(s,{emit:a}){const t=s;let{modelValue:o}=oa(t),i=g({get:()=>o.value,set:u=>{a("update:modelValue",u)}});const d=h(null);function m(){d.value&&d.value.focus()}let r=_("amColors"),p=g(()=>({"--am-c-primary":r.value.colorPrimary,"--am-c-success":r.value.colorSuccess,"--am-c-error":r.value.colorError,"--am-c-warning":r.value.colorWarning,"--am-c-main-bgr":r.value.colorMainBgr,"--am-c-main-heading-text":r.value.colorMainHeadingText,"--am-c-main-text":r.value.colorMainText,"--am-c-sb-bgr":r.value.colorSbBgr,"--am-c-sb-text":r.value.colorSbText,"--am-c-inp-bgr":r.value.colorInpBgr,"--am-c-inp-border":r.value.colorInpBorder,"--am-c-inp-text":r.value.colorInpText,"--am-c-inp-placeholder":r.value.colorInpPlaceHolder,"--am-c-drop-bgr":r.value.colorDropBgr,"--am-c-drop-text":r.value.colorDropText,"--am-c-drop-text-op10":x(r.value.colorDropText,.1),"--am-c-drop-text-op50":x(r.value.colorDropText,.5),"--am-c-drop-text-op80":x(r.value.colorDropText,.8),"--am-c-drop-border":r.value.colorDropBorder,"--am-c-btn-prim":r.value.colorBtnPrim,"--am-c-btn-prim-text":r.value.colorBtnPrimText,"--am-c-btn-sec":r.value.colorBtnSec,"--am-c-btn-sec-text":r.value.colorBtnSecText,"--am-c-btn-danger":r.value.colorBtnDanger,"--am-c-btn-danger-text":r.value.colorBtnDangerText,"--am-c-skeleton-op20":x(r.value.colorMainText,.2),"--am-c-skeleton-op60":x(r.value.colorMainText,.6),"--am-c-skeleton-sb-op20":x(r.value.colorSbText,.2),"--am-c-skeleton-sb-op60":x(r.value.colorSbText,.6)}));return(u,y)=>{const D=na,$=ia;return n(),c("div",{class:H(["am-date-picker-wrapper",`am-date-picker--${s.size}`])},[t.customInputDisplay&&t.type==="daterange"&&e(i).length?(n(),c("div",{key:0,class:H(["am-date-picker__input",`am-date-picker--${s.size}`]),onClick:m},[Ea,l("div",Aa,[l("span",ja,f(e(Me)(e(ve)(e(i)[0]).format("YYYY-MM-DD"))),1),Na,l("span",Va,f(e(Me)(e(ve)(e(i)[1]).format("YYYY-MM-DD"))),1)])],2)):C("",!0),q($,{locale:e($a)(t.lang)},{default:M(()=>[q(D,Ne(u.$props,{id:s.id,ref_key:"amDatePicker",ref:d,modelValue:e(i),"onUpdate:modelValue":y[0]||(y[0]=w=>me(i)?i.value=w:i=w),type:s.type,value:s.value,"prefix-icon":s.prefixIcon,"popper-class":s.popperClass,placeholder:s.placeholder,"clear-icon":s.clearIcon,"default-value":s.defaultValue,clearable:s.clearable,"disabled-date":s.disabledDate,"value-format":s.valueFormat,format:s.format,editable:s.editable,class:["am-date-picker",[`am-date-picker--${s.size}`,{"am-date-picker--disabled":s.disabled},{"am-date-picker--custom":t.type==="daterange"&&t.customInputDisplay}]],"popper-style":e(p),onInput:y[1]||(y[1]=w=>u.$emit("input",w)),onChange:y[2]||(y[2]=w=>u.$emit("change",w)),onBlur:y[3]||(y[3]=w=>u.$emit("blur",w)),onFocus:y[4]||(y[4]=w=>u.$emit("focus",w)),onCalendarChange:y[5]||(y[5]=w=>u.$emit("calendar-change",w))}),null,16,["id","modelValue","type","value","prefix-icon","popper-class","placeholder","clear-icon","default-value","clearable","disabled-date","value-format","format","editable","popper-style","class"])]),_:1},8,["locale"])],2)}}};const Ua={class:"am-oit__wrapper"},Wa={class:"am-oit"},qa={class:"am-oit__img"},Za={key:0},Ra={class:"am-oit__content am-oit__content-short"},Ha={class:"am-oit__data"},Ja={class:"am-oit__data-label-name"},Ga=["innerHTML"],Qa={style:{display:"flex"}},Xa=l("span",{class:"am-icon-circle-info"},null,-1),Ka=[Xa],es={class:"am-dialog__title"},ts={class:"am-dialog__body"},as={class:"am-dialog__body-heading"},ss={class:"am-oit__img"},ls={key:0},os={class:"am-dialog__body-heading__text"},ns={class:"am-dialog__body-heading__text-name"},is=["innerHTML"],rs={inheritAttrs:!1},cs=Object.assign(rs,{props:{identifier:{type:[String,Number],required:!0},imageThumb:{type:String,default:""},label:{type:[String,Number],default:""},description:{type:String,default:""},price:{type:[String,Number],default:""},dialogTitle:{type:String,default:""},dialogButtonText:{type:String,default:""},badge:{type:[String,Number,Object]}},emits:["click"],setup(s,{emit:a}){const t=s;let o=h(!1);const i=$=>{$.stopPropagation(),o.value=!0},d=()=>{o.value=!1,a("click",t.identifier)};function m($){return $=$.replace(/<\/p>/g," </p>").replace(/<\/h1>/g," </h1>").replace(/<\/h2>/g," </h2>").replace(/<\/h3>/g," </h3>").replace(/<\/h4>/g," </h4>"),$=$.replace(/<\/li>/g," </li>"),$}function r(){if(t.label){let $="";return t.label.split(" ").forEach(w=>{$+=w.charAt(0).toUpperCase()}),$}}let p=_("primDescBtnType","filled"),u=_("amColors"),y=g(()=>({"--am-oit-c-main-bgr":u.value.colorMainBgr,"--am-oit-c-main-btn-color":u.value.colorBtnPrim,"--am-oit-c-main-btn-color-text":u.value.colorBtnPrimText,"--am-oit-c-main-heading-text":u.value.colorMainHeadingText,"--am-oit-c-main-heading-text-op90":x(u.value.colorMainHeadingText,.9),"--am-oit-c-main-text":u.value.colorMainText,"--am-c-option-img-text":u.value.colorMainBgr})),D=g(()=>({"--am-c-option-selected":u.value.colorPrimary}));return($,w)=>(n(),c("span",Ua,[l("span",Wa,[l("span",qa,[l("span",{class:"am-oit__img-placeholder",style:ce({backgroundImage:`url(${t.imageThumb})`})},[t.imageThumb?C("",!0):(n(),c("span",Za,f(r()),1))],4)]),l("span",Ra,[l("span",Ha,[l("span",{class:H(`am-oit__data-label ${s.badge?"am-oit__data-label-wrap":""}`)},[l("span",Ja,f(s.label),1),s.badge?(n(),c("span",{key:0,class:"am-oit__data-label-badge",style:ce({background:s.badge.color})},f(s.badge.content),5)):C("",!0)],2),!s.badge&&e(rt)(s.description)?(n(),c("span",{key:0,class:"am-oit__data-description",innerHTML:m(s.description)},null,8,Ga)):C("",!0)]),l("span",Qa,[t.price?(n(),c("span",{key:0,class:"am-oit__price",style:ce(e(D))},f(t.price),5)):C("",!0),e(rt)(s.description)?(n(),c("span",{key:1,class:"am-oit__info-trigger",onClick:i},Ka)):C("",!0)])])]),e(rt)(s.description)?(n(),W(La,{key:0,modelValue:e(o),"onUpdate:modelValue":w[0]||(w[0]=I=>me(o)?o.value=I:o=I),"custom-class":"am-option-template-dialog am-dialog ql-description","append-to-body":!0,"custom-styles":e(y),"destroy-on-close":!0,"align-center":!0,"modal-class":"am-dialog-employee-description"},{title:M(()=>[l("span",es,f(s.dialogTitle),1)]),footer:M(()=>[q(he,{type:e(p),category:"primary",onClick:d},{default:M(()=>[de(f(s.dialogButtonText),1)]),_:1},8,["type"])]),default:M(()=>[l("div",ts,[l("div",as,[l("span",ss,[l("span",{class:"am-oit__img-placeholder",style:ce({backgroundImage:`url(${t.imageThumb})`})},[t.imageThumb?C("",!0):(n(),c("span",ls,f(r()),1))],4)]),l("div",os,[l("span",ns,f(s.label),1),s.badge?(n(),c("span",{key:0,class:"am-dialog__body-heading__text-badge",style:ce({background:s.badge.color})},f(s.badge.content),5)):C("",!0)])]),l("div",{class:"am-dialog__body-content",innerHTML:s.description},null,8,is)])]),_:1},8,["modelValue","custom-styles"])):C("",!0)]))}});function us(s,a,t){let o={};return s.forEach(i=>{a===""&&i.periods.forEach(u=>{u.periodStart=Ge(u.periodStart),u.periodEnd=Ge(u.periodEnd)});let m=ve(i.periods[0].periodStart,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD"),r=t.getters.getSettings.general.usedLanguages.map(u=>u.length>2?u.slice(0,2):u);(t.getters.getSettings.general.usedLanguages.indexOf(t.getters.getLocalLanguage)!==-1||r.indexOf(t.getters.getLocalLanguage.split("_")[0])!==-1)&&(i.name=we(i),i.customTickets.forEach(u=>{u.name=wa(u)})),m in o||(o[m]={date:m,events:[]}),i.full&&i.status==="approved"?i.status="full":i.upcoming&&i.status==="approved"&&(i.status="upcoming"),i.bookings.forEach(u=>{let y=JSON.parse(JSON.stringify(i));y.bookings=[u],o[m].events.push(y)})}),o}function Vt(s){let a=0;return s.bookings.forEach(t=>{if(["approved","pending"].includes(t.status)){let o=0;if(t.ticketsData.length>0)for(let d=0;d<t.ticketsData.length;d++)o+=t.ticketsData[d].persons*t.ticketsData[d].price;else o+=s.price;let i=zt(s,t.coupon,t.tax?t.tax[0]:null,o,!1);a+=i.price-i.discount+i.tax}}),a>=0?a:0}function ds(s){let a=[];return s.forEach(t=>{let o=ve(t.periodStart.split(" ")[0],"YYYY-MM-DD"),i=ve(t.periodEnd.split(" ")[0],"YYYY-MM-DD"),d=t.periodStart.split(" ")[1].slice(0,5),m=t.periodEnd.split(" ")[1].slice(0,5);m==="00:00"&&(m="24:00",i.subtract(1,"days"));let r=[];for(;o.isSameOrBefore(i);)r.push(o.format("YYYY-MM-DD")),o.add(1,"days");r.forEach(p=>{a.push({date:p,startTime:d,endTime:m,periodStart:p+" "+d,periodEnd:p+" "+m,zoomLink:s.length>1&&t.zoomMeeting?t.zoomMeeting.joinUrl:"",lessonSpaceLink:s.length>1&&t.lessonSpace?t.lessonSpace:"",googleMeetLink:s.length>1&&t.googleMeetUrl?t.googleMeetUrl:""})})}),a}function ps(s){let a=[];return s.bookings.forEach(t=>{["approved","pending"].includes(t.status)&&t.ticketsData&&t.ticketsData.length&&t.ticketsData.forEach(o=>{a.push({persons:o.persons,price:o.price,name:s.customTickets.find(i=>i.id===o.eventTicketId).name})})}),a}function ms(s,a){let t=s.getters["entities/getLocations"];if(a.locationId&&t.length){let o=t.find(i=>i.id===a.locationId);return typeof o!="undefined"?o:null}else if(a.customLocation)return{address:"",name:a.customLocation};return null}let ut=[],Ye=["1788FB","4BBEC6","FBC22D","FA3C52","D696B8","689BCA","26CC2B","FD7E35","E38587","774DFB","31CDF3","6AB76C","FD5FA1","A697C5"];function $r(s,a,t){if(a!==null){let o=t===!0?a.firstName+" "+a.lastName:a.name;if(typeof o!="undefined")return a.pictureThumbPath=a.pictureThumbPath||_s(s,o),a.pictureThumbPath}}function pt(s){return s.split(" ").map(a=>a.charAt(0)).join("").toUpperCase().substring(0,3).replace(/[^\w\s]/g,"")}function _s(s,a,t={},o=!1){let i=pt(a),d=Math.floor(Math.random()*Ye.length),m=Ye[d];return ut.push(Ye[d]),Ye.splice(d,1),Ye.length===0&&(Ye=ut,ut=[]),o?t.firstName?s.wpAmeliaPluginURL+"public/img/default-employee.svg":t.latitude?s.wpAmeliaPluginURL+"public/img/default-location.svg":s.wpAmeliaPluginURL+"public/img/default-service.svg":location.protocol+"//via.placeholder.com/120/"+m+"/fff?text="+i}const gs={class:"am-msd__item-wrapper"},fs={class:"am-msd__item-inner"},vs={class:"am-msd__item-heading"},bs=l("div",{class:"am-msd__item-icon"},[l("span",{class:"am-icon-close"})],-1),hs=["onClick"],ys={class:"am-msd__item-inner"},ks={class:"am-msd__item-icon"},xs={class:"am-msd__item-heading"},Cs=l("div",{class:"am-msd__item-indicator"},[l("span",{class:"am-icon-arrow-big-right"})],-1),Ts={key:1,class:"am-msd__item-divider"},$s={class:"am-msd__item-inner"},Ps=l("div",{class:"am-msd__item-icon"},[l("span",{class:"am-icon-logout"})],-1),Ls={class:"am-msd__item-heading"},ws={props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},monitor:{type:String,required:!0},menuItems:{type:Array,required:!0},customCss:{type:Object,default:()=>{}},width:{type:Number,default:300},position:{type:String,default:"right",validator(s){return["right","left","top","bottom"].includes(s)}}},emits:["click","update:visibility","logout"],setup(s,{emit:a}){const t=s;let o=_("labels");const i=xe();function d(u,y){a("click",{step:u,index:y}),a("update:visibility",!1)}function m(){a("update:visibility",!1)}function r(u){return Object.keys(t.customizedLabels).length&&t.customizedLabels[u]?t.customizedLabels[u]:o[u]}let p=g(()=>({"--am-mw-msd":`${t.width}px`}));return(u,y)=>(n(),W(st,{visibility:s.visibility,position:s.position,"custom-class":"am-msd","close-outside":!0,"custom-css":be(be({},s.customCss),e(p)),"onUpdate:visibility":y[1]||(y[1]=D=>e(a)("update:visibility",!1))},{footer:M(()=>[l("div",{class:"am-msd__item",onClick:y[0]||(y[0]=()=>e(a)("logout"))},[l("div",$s,[Ps,l("p",Ls,f(r("log_out")),1)])])]),default:M(()=>[l("div",gs,[l("div",{class:"am-msd__item",onClick:m},[l("div",fs,[q(Be,{name:"fade"},{default:M(()=>[l("p",vs,f(r("menu_title")),1)]),_:1}),q(Be,{name:"fade"},{default:M(()=>[bs]),_:1})])]),(n(!0),c(ae,null,pe(s.menuItems,(D,$)=>(n(),c(ae,{key:D.key},[D.key!=="packages"||e(i).getters["entities/getPackages"].length?(n(),c("div",{key:0,class:H(["am-msd__item",{selected:s.monitor===D.key}]),onClick:w=>d(D,$)},[l("div",ys,[l("div",ks,[l("span",{class:H(`am-icon-${D.icon}`)},null,2)]),q(Be,{name:"fade"},{default:M(()=>[l("p",xs,f(D.label),1)]),_:2},1024),q(Be,{name:"fade"},{default:M(()=>[Cs]),_:1})])],10,hs)):C("",!0),$===0?(n(),c("div",Ts)):C("",!0)],64))),128))])]),_:1},8,["visibility","position","custom-css"]))}};const mt={props:{size:{type:String,default:"default"}},setup(s){const a=s,t=lt().cookies,o=_("settings");let i=_("cabinetType"),{bookingsCounterChanger:d}=_("bookingsCounterChanger",{bookingsCounterChanger:()=>{}});const m=xe();let r=g({get:()=>m.getters["cabinet/getTimeZone"],set:$=>{m.commit("cabinet/setTimeZone",$||"")}});const p=_("timeZone"),u=_("timeZones");function y(){let $;o.general.showClientTimeZone?$=Ze():$=p.value,t.set("ameliaUserTimeZone",$,o.roles[i.value+"Cabinet"].tokenValidTime),d(),m.commit("cabinet/setTimeZone",$)}function D($){t.set("ameliaUserTimeZone",$,o.roles[i.value+"Cabinet"].tokenValidTime),d()}return($,w)=>(n(),W(Xe,{modelValue:e(r),"onUpdate:modelValue":w[0]||(w[0]=I=>me(r)?r.value=I:r=I),filterable:!0,placeholder:e(Ze)(),clearable:!0,size:e(a).size,"custom-class":"am-ctz","prefix-icon":"globe-watch",onClear:y,onChange:D},{default:M(()=>[(n(!0),c(ae,null,pe(e(u),(I,F)=>(n(),W(Qe,{key:F,value:I,label:I},{default:M(()=>[de(f(I),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","size"]))}};function Yt(){return"ameliaBooking"in window&&"cabinet"in window.ameliaBooking&&"disableAuthorizationHeader"in window.ameliaBooking.cabinet&&window.ameliaBooking.cabinet.disableAuthorizationHeader}function De(s){let a=s.getters["auth/getToken"];return a&&!Yt()?{headers:{Authorization:"Bearer "+a}}:{}}const Ss={key:0,class:"el-skeleton-item-wrapper-title"},Ds={name:"AuthSkeleton"},ht=Object.assign(Ds,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(s){const a=s;return(t,o)=>{const i=ot,d=nt;return n(),W(d,{animated:"",class:H(["am-asi-el-skeleton",e(a).mainClass])},{template:M(()=>[e(a).centerFirst?(n(),c("div",Ss,[q(i,{variant:"rect"})])):C("",!0),(n(!0),c(ae,null,pe(new Array(e(a).count),m=>(n(),c("div",{key:m,class:"el-skeleton-item-wrapper"},[q(i,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});const Fs={class:"am-asi__top"},Ms={class:"am-asi__header"},Os={class:"am-asi__text"},zs={class:"am-asi__footer"},Bs={class:"am-asi__footer-text"},Is={name:"AuthSignIn"},Es=Object.assign(Is,{setup(s){let a=xe();const t=lt().cookies,o=_("settings");let i=_("amCustomize");const d=_("labels"),m=_("localLanguage");let r=g(()=>o.general.usedLanguages.includes(m.value)),p=g(()=>{let A=ke(be({},d)),Z=i.value.signIn.translations;return Z&&Object.keys(Z).forEach(ne=>{Z[ne][m.value]&&r.value?A[ne]=Z[ne][m.value]:Z[ne].default&&(A[ne]=Z[ne].default)}),A}),u={components:{IconComponent:Ae},template:'<IconComponent icon="email"></IconComponent>'},y={components:{IconComponent:Ae},template:'<IconComponent icon="password"></IconComponent>'},D=h(null),$=h({email:g({get:()=>a.getters["auth/getEmail"],set:A=>{a.commit("auth/setEmail",A||"")}}),password:g({get:()=>a.getters["auth/getPassword"],set:A=>{a.commit("auth/setPassword",A||"")}})}),w=h({email:[{required:!0,message:p.value.enter_email_or_username_warning,trigger:"submit"}],password:[{required:!0,message:p.value.enter_password_warning,trigger:"submit"}]}),I=h({email:{template:Se.text,props:{itemName:"email",label:p.value.email_or_username,iconStart:ye(u),placeholder:"",class:"am-asi__item"}},password:{template:Se.text,props:{itemName:"password",itemType:"password",showPassword:!0,label:p.value.password,iconStart:ye(y),placeholder:"",class:"am-asi__item"}}}),F=_("pageKey"),k=_("cabinetType"),V=g(()=>a.getters.getLoading),b=g(()=>a.getters["auth/getProfileDeleted"]),U=h(!1),G=h("");function R(A,Z){let ne=wt("token");A?Q(A,!1,!1,!1):ne?Q(ne,!0,!1,Z):Q("",!1,!0,!1)}function Q(A,Z,ne,se){let Y={cabinetType:k.value,changePass:se};ne&&(Y.checkIfWpUser=!0);let j=a.getters["auth/getPassword"],te=a.getters["auth/getEmail"];!A&&j&&te&&(Y.password=j,Y.email=te),Z&&(Y.token=A),Ce.post("/users/authenticate",Y,A!==null&&!Yt()?{headers:{Authorization:"Bearer "+A}}:{}).then(ee=>{if("authentication_required"in ee.data.data){o.roles[k.value+"Cabinet"].loginEnabled||(F.value="sendAccessLink");return}"token"in ee.data.data&&(t.set("ameliaToken",ee.data.data.token,o.roles[k.value+"Cabinet"].tokenValidTime,null,null,!0),t.set("ameliaUserEmail",ee.data.data.user.email,o.roles[k.value+"Cabinet"].tokenValidTime,null,null,!0),a.commit("auth/setToken",ee.data.data.token)),wt("token")&&window.history.replaceState(null,null,ca(window.location.href,"token")),a.commit("auth/setProfile",ee.data.data.user),"set_password"in ee.data.data&&ee.data.data.set_password||"change_password"in ee.data.data&&ee.data.data.change_password?F.value="setPassword":a.commit("auth/setAuthenticated",!0)}).catch(ee=>{if(!("data"in ee.response.data)&&"message"in ee.response.data){U.value=!0,G.value=ee.response.data.message;return}"invalid_credentials"in ee.response.data.data&&(U.value=!0,G.value=p.value.invalid_credentials)}).finally(()=>{a.commit("setLoading",!1)})}function K(){D.value.validate(A=>{if(A)a.commit("setLoading",!0),Q(null,!1,!1,!1);else return!1})}Bt(()=>{a.commit("setLoading",!0)}),Fe(()=>{a.getters["auth/getLoggedOut"]?(o.roles[k.value+"Cabinet"].loginEnabled||(F.value="sendAccessLink"),a.commit("setLoading",!1)):R(t.get("ameliaToken"),"changePass"in ra(window.location.href))});let B=_("containerWidth"),O=g(()=>Pe(B.value)),P=_("amFonts"),S=_("amColors"),L=g(()=>({"--am-c-primary":S.value.colorPrimary,"--am-c-success":S.value.colorSuccess,"--am-c-error":S.value.colorError,"--am-c-warning":S.value.colorWarning,"--am-c-main-bgr":S.value.colorMainBgr,"--am-c-main-heading-text":S.value.colorMainHeadingText,"--am-c-main-text":S.value.colorMainText,"--am-c-main-text-op70":x(S.value.colorMainText,.7),"--am-c-main-text-op60":x(S.value.colorMainText,.6),"--am-c-main-text-op40":x(S.value.colorMainText,.4),"--am-c-main-text-op25":x(S.value.colorMainText,.25),"--am-c-inp-bgr":S.value.colorInpBgr,"--am-c-inp-border":S.value.colorInpBorder,"--am-c-inp-text":S.value.colorInpText,"--am-c-inp-placeholder":S.value.colorInpPlaceHolder,"--am-c-btn-prim":S.value.colorBtnPrim,"--am-c-btn-prim-text":S.value.colorBtnPrimText,"--am-c-skeleton-op20":x(S.value.colorMainText,.2),"--am-c-skeleton-op60":x(S.value.colorMainText,.6),"--am-font-family":P.value.fontFamily,"--am-c-scroll-op30":x(S.value.colorPrimary,.3),"--am-c-scroll-op10":x(S.value.colorPrimary,.1)}));return(A,Z)=>{const ne=Re;return e(V)?(n(),W(e(ht),{key:1,count:4,"center-first":!0,"main-class":"am-asi-sign-in am-asi"})):(n(),c("div",{key:0,class:"am-asi",style:ce(e(L))},[l("div",Fs,[e(b)?(n(),W(Ee,{key:0,class:"am-asi__top-message am-asi__top-message-success",type:"success",title:e(p).profile_deleted,description:"","show-icon":!0,closable:!0,onClose:Z[0]||(Z[0]=se=>e(a).commit("auth/setProfileDeleted",!1))},null,8,["title"])):C("",!0),e(U)?(n(),W(Ee,{key:1,class:"am-asi__top-message am-asi__top-message-error",type:"error",title:e(G),description:"","show-icon":!0,closable:!0,onClose:Z[1]||(Z[1]=se=>e(a).commit("auth/setProfileDeleted",!1))},null,8,["title"])):C("",!0),l("div",Ms,f(e(p).welcome_back),1),l("div",Os,f(e(p).enter_credentials),1)]),q(ne,{ref_key:"authFormRef",ref:D,model:e($),rules:e(w),"label-position":"top",class:H(["am-asi__form",e(O)])},{default:M(()=>[(n(!0),c(ae,null,pe(e(I),(se,Y)=>(n(),W(Ie(se.template),Ne({key:Y,ref_for:!0,ref:"customerCollectorRef",modelValue:e($)[Y],"onUpdate:modelValue":j=>e($)[Y]=j},se.props,{onEnter:K}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),q(he,{class:"am-asi__btn",type:e(i).signIn.options.signInBtn.buttonType,onClick:K},{default:M(()=>[de(f(e(p).sign_in),1)]),_:1},8,["type"]),l("div",zs,[l("span",Bs,f(e(p).forgot_your_password),1),l("span",{class:"am-asi__footer-link",onClick:Z[2]||(Z[2]=se=>me(F)?F.value="sendAccessLink":F="sendAccessLink")},f(e(p).reset_password),1)])],4))}}});const As={class:"am-asi__top"},js={class:"am-asi__header"},Ns={class:"am-asi__text"},Vs={key:0,class:"am-asi__footer"},Ys={name:"AuthReset"},Us=Object.assign(Ys,{setup(s){let a=xe();const t=_("settings");let o=_("amCustomize");const i=_("labels"),d=_("localLanguage");let m=g(()=>t.general.usedLanguages.includes(d.value)),r=g(()=>{let R=ke(be({},i)),Q=o.value.accessLink.translations;return Q&&Object.keys(Q).forEach(K=>{Q[K][d.value]&&m.value?R[K]=Q[K][d.value]:Q[K].default&&(R[K]=Q[K].default)}),R}),p=h(null),u=h({email:g({get:()=>a.getters["auth/getEmail"],set:R=>{a.commit("auth/setEmail",R||"")}})}),y=h({email:[{required:!0,message:r.value.enter_email_warning,trigger:"submit"}]}),D=h({email:{template:Se.text,props:{itemName:"email",itemType:"email",label:r.value.email,placeholder:"",class:"am-asi__item"}}}),$=_("pageKey"),w=_("cabinetType"),I=g(()=>a.getters.getLoading);function F(){p.value.validate(R=>{if(R)a.commit("setLoading",!0),Ce.post("/users/customers/reauthorize",{email:a.getters["auth/getEmail"],locale:window.localeLanguage[0],cabinetType:w.value}).then(()=>{$.value="sendAccessLinkProcess"}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)});else return!1})}let k=_("containerWidth"),V=g(()=>Pe(k.value)),b=_("amFonts"),U=_("amColors"),G=g(()=>({"--am-c-primary":U.value.colorPrimary,"--am-c-success":U.value.colorSuccess,"--am-c-error":U.value.colorError,"--am-c-warning":U.value.colorWarning,"--am-c-main-bgr":U.value.colorMainBgr,"--am-c-main-heading-text":U.value.colorMainHeadingText,"--am-c-main-text":U.value.colorMainText,"--am-c-main-text-op70":x(U.value.colorMainText,.7),"--am-c-main-text-op60":x(U.value.colorMainText,.6),"--am-c-main-text-op40":x(U.value.colorMainText,.4),"--am-c-main-text-op25":x(U.value.colorMainText,.25),"--am-c-inp-bgr":U.value.colorInpBgr,"--am-c-inp-border":U.value.colorInpBorder,"--am-c-inp-text":U.value.colorInpText,"--am-c-inp-placeholder":U.value.colorInpPlaceHolder,"--am-c-btn-prim":U.value.colorBtnPrim,"--am-c-btn-prim-text":U.value.colorBtnPrimText,"--am-c-skeleton-op20":x(U.value.colorMainText,.2),"--am-c-skeleton-op60":x(U.value.colorMainText,.6),"--am-font-family":b.value.fontFamily,"--am-c-scroll-op30":x(U.value.colorPrimary,.3),"--am-c-scroll-op10":x(U.value.colorPrimary,.1)}));return(R,Q)=>{const K=Re;return e(I)?(n(),W(e(ht),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(n(),c("div",{key:0,class:"am-asi",style:ce(e(G))},[l("div",As,[l("div",js,f(e(r).access_link_send),1),l("div",Ns,f(e(r).access_link_send_description),1)]),q(K,{ref_key:"authFormRef",ref:p,model:e(u),rules:e(y),"label-position":"top",class:H(["am-asi__form",e(V)])},{default:M(()=>[(n(!0),c(ae,null,pe(e(D),(B,O)=>(n(),W(Ie(B.template),Ne({key:O,ref_for:!0,ref:"customerCollectorRef",modelValue:e(u)[O],"onUpdate:modelValue":P=>e(u)[O]=P},B.props,{onEnter:F}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),q(he,{class:"am-asi__btn",type:e(o).accessLink.options.sendBtn.buttonType,onClick:F},{default:M(()=>[de(f(e(r).send),1)]),_:1},8,["type"]),e(t).roles[e(w)+"Cabinet"].loginEnabled?(n(),c("div",Vs,[l("span",{class:"am-asi__footer-link",onClick:Q[0]||(Q[0]=B=>me($)?$.value="signIn":$="signIn")},f(e(r).sign_in),1)])):C("",!0)],4))}}});const Ws={class:"am-asi__top"},qs={class:"am-asi__header"},Zs={class:"am-asi__text"},Rs={class:"am-asi__email"},Hs={class:"am-asi__footer"},Js={class:"am-asi__footer-text"},Gs={name:"AuthResetProcess"},Qs=Object.assign(Gs,{setup(s){let a=xe();const t=_("settings");let o=_("amCustomize");const i=_("labels"),d=_("localLanguage");let m=g(()=>t.general.usedLanguages.includes(d.value)),r=g(()=>{let w=ke(be({},i)),I=o.value.accessLinkSuccess.translations;return I&&Object.keys(I).forEach(F=>{I[F][d.value]&&m.value?w[F]=I[F][d.value]:I[F].default&&(w[F]=I[F].default)}),w}),p=g(()=>a.getters["auth/getEmail"]),u=_("pageKey"),y=_("amFonts"),D=_("amColors"),$=g(()=>({"--am-c-primary":D.value.colorPrimary,"--am-c-success":D.value.colorSuccess,"--am-c-error":D.value.colorError,"--am-c-warning":D.value.colorWarning,"--am-c-main-bgr":D.value.colorMainBgr,"--am-c-main-heading-text":D.value.colorMainHeadingText,"--am-c-main-text":D.value.colorMainText,"--am-c-main-text-op70":x(D.value.colorMainText,.7),"--am-c-main-text-op60":x(D.value.colorMainText,.6),"--am-c-main-text-op40":x(D.value.colorMainText,.4),"--am-c-main-text-op25":x(D.value.colorMainText,.25),"--am-c-inp-bgr":D.value.colorInpBgr,"--am-c-inp-border":D.value.colorInpBorder,"--am-c-inp-text":D.value.colorInpText,"--am-c-inp-placeholder":D.value.colorInpPlaceHolder,"--am-c-btn-prim":D.value.colorBtnPrim,"--am-c-btn-prim-text":D.value.colorBtnPrimText,"--am-c-skeleton-op20":x(D.value.colorMainText,.2),"--am-c-skeleton-op60":x(D.value.colorMainText,.6),"--am-font-family":y.value.fontFamily,"--am-c-scroll-op30":x(D.value.colorPrimary,.3),"--am-c-scroll-op10":x(D.value.colorPrimary,.1)}));return(w,I)=>(n(),c("div",{class:"am-asi",style:ce(e($))},[l("div",Ws,[l("div",qs,f(e(r).access_link_send_check),1),l("div",Zs,f(e(r).access_link_send_click),1),l("div",Rs,f(e(p)),1)]),l("div",Hs,[l("span",Js,f(e(r).access_link_send_inbox),1),l("span",{class:"am-asi__footer-link",onClick:I[0]||(I[0]=F=>me(u)?u.value="sendAccessLink":u="sendAccessLink")},f(e(r).access_link_send_retry),1)])],4))}});const Xs={class:"am-asi__top"},Ks={class:"am-asi__header"},el={class:"am-asi__text"},tl={name:"AuthNewPass"},al=Object.assign(tl,{setup(s){let a=xe();const t=_("settings");let o=_("amCustomize");const i=_("labels"),d=_("localLanguage");let m=g(()=>t.general.usedLanguages.includes(d.value)),r=g(()=>{let G=ke(be({},i)),R=o.value.setPass.translations;return R&&Object.keys(R).forEach(Q=>{R[Q][d.value]&&m.value?G[Q]=R[Q][d.value]:R[Q].default&&(G[Q]=R[Q].default)}),G}),p=h(null),u=h({newPassword:g({get:()=>a.getters["auth/getNewPassword"],set:G=>{a.commit("auth/setNewPassword",G||"")}}),confirmPassword:g({get:()=>a.getters["auth/getConfirmPassword"],set:G=>{a.commit("auth/setConfirmPassword",G||"")}})}),y=h({newPassword:[{required:!0,message:r.value.new_password_required,trigger:"submit"},{min:4,message:r.value.new_password_length,trigger:"submit"}],confirmPassword:[{required:!0,message:r.value.new_password_required,trigger:"submit"},{min:4,message:r.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:r.value.passwords_not_match,trigger:"submit"}]}),D=h({newPassword:{template:Se.text,props:{itemName:"newPassword",itemType:"password",showPassword:!0,label:r.value.new_password_colon,placeholder:"",minLength:3,class:"am-asi__item"}},confirmPassword:{template:Se.text,props:{itemName:"confirmPassword",itemType:"password",showPassword:!0,label:r.value.new_password_colon_retype,placeholder:"",minLength:3,class:"am-asi__item"}}}),$=_("cabinetType"),w=g(()=>a.getters.getLoading);function I(){p.value.validate(G=>{if(G&&a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"]){let R=a.getters["auth/getProfile"];a.commit("setLoading",!0),Ce.post("/users/"+$.value+"s/"+R.id,{password:a.getters["auth/getNewPassword"]},Object.assign(De(a),{params:{source:"cabinet-"+$.value}})).then(()=>{a.commit("auth/setAuthenticated",!0)}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)})}else return!1})}let F=_("containerWidth"),k=g(()=>Pe(F.value)),V=_("amFonts"),b=_("amColors"),U=g(()=>({"--am-c-primary":b.value.colorPrimary,"--am-c-success":b.value.colorSuccess,"--am-c-error":b.value.colorError,"--am-c-warning":b.value.colorWarning,"--am-c-main-bgr":b.value.colorMainBgr,"--am-c-main-heading-text":b.value.colorMainHeadingText,"--am-c-main-text":b.value.colorMainText,"--am-c-main-text-op70":x(b.value.colorMainText,.7),"--am-c-main-text-op60":x(b.value.colorMainText,.6),"--am-c-main-text-op40":x(b.value.colorMainText,.4),"--am-c-main-text-op25":x(b.value.colorMainText,.25),"--am-c-inp-bgr":b.value.colorInpBgr,"--am-c-inp-border":b.value.colorInpBorder,"--am-c-inp-text":b.value.colorInpText,"--am-c-inp-placeholder":b.value.colorInpPlaceHolder,"--am-c-btn-prim":b.value.colorBtnPrim,"--am-c-btn-prim-text":b.value.colorBtnPrimText,"--am-c-skeleton-op20":x(b.value.colorMainText,.2),"--am-c-skeleton-op60":x(b.value.colorMainText,.6),"--am-font-family":V.value.fontFamily,"--am-c-scroll-op30":x(b.value.colorPrimary,.3),"--am-c-scroll-op10":x(b.value.colorPrimary,.1)}));return(G,R)=>{const Q=Re;return e(w)?(n(),W(e(ht),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(n(),c("div",{key:0,class:"am-asi",style:ce(e(U))},[l("div",Xs,[l("div",Ks,f(e(r).new_password_set),1),l("div",el,f(e(r).new_password_set_description),1)]),q(Q,{ref_key:"authFormRef",ref:p,model:e(u),rules:e(y),"label-position":"top",class:H(["am-asi__form",e(k)])},{default:M(()=>[(n(!0),c(ae,null,pe(e(D),(K,B)=>(n(),W(Ie(K.template),Ne({key:B,ref_for:!0,ref:"customerCollectorRef",modelValue:e(u)[B],"onUpdate:modelValue":O=>e(u)[B]=O},K.props,{onEnter:I}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),q(he,{class:"am-asi__btn",type:e(o).setPass.options.newPassBtn.buttonType,onClick:I},{default:M(()=>[de(f(e(r).new_password_set_action),1)]),_:1},8,["type"])],4))}}});const sl={class:"am-asi__top"},ll=l("div",{class:"am-asi__img"},[l("span",{class:"am-icon-check"})],-1),ol={class:"am-asi__header"},nl={class:"am-asi__text"},il={name:"ChangePassSuccess"},rl=Object.assign(il,{setup(s){const a=_("settings");let t=_("amCustomize");const o=_("labels"),i=_("localLanguage");let d=g(()=>a.general.usedLanguages.includes(i.value)),m=g(()=>{let D=ke(be({},o)),$=t.value.setPassSuccess.translations;return $&&Object.keys($).forEach(w=>{$[w][i.value]&&d.value?D[w]=$[w][i.value]:$[w].default&&(D[w]=$[w].default)}),D}),r=_("pageKey"),p=_("amFonts"),u=_("amColors"),y=g(()=>({"--am-c-primary":u.value.colorPrimary,"--am-c-success":u.value.colorSuccess,"--am-c-error":u.value.colorError,"--am-c-warning":u.value.colorWarning,"--am-c-main-bgr":u.value.colorMainBgr,"--am-c-main-heading-text":u.value.colorMainHeadingText,"--am-c-main-text":u.value.colorMainText,"--am-c-main-text-op70":x(u.value.colorMainText,.7),"--am-c-main-text-op60":x(u.value.colorMainText,.6),"--am-c-main-text-op40":x(u.value.colorMainText,.4),"--am-c-main-text-op25":x(u.value.colorMainText,.25),"--am-c-btn-prim":u.value.colorBtnPrim,"--am-c-btn-prim-text":u.value.colorBtnPrimText,"--am-c-skeleton-op20":x(u.value.colorMainText,.2),"--am-c-skeleton-op60":x(u.value.colorMainText,.6),"--am-font-family":p.value.fontFamily,"--am-c-scroll-op30":x(u.value.colorPrimary,.3),"--am-c-scroll-op10":x(u.value.colorPrimary,.1)}));return(D,$)=>(n(),c("div",{class:"am-asi",style:ce(e(y))},[l("div",sl,[ll,l("div",ol,f(e(m).new_password_changed),1),l("div",nl,f(e(m).new_password_changed_description),1)]),q(he,{class:"am-asi__btn",type:e(t).setPassSuccess.options.signInBtn.buttonType,onClick:$[0]||($[0]=w=>me(r)?r.value="signIn":r="signIn")},{default:M(()=>[de(f(e(m).sign_in),1)]),_:1},8,["type"])],4))}}),cl={name:"AuthWrapper"},ul=Object.assign(cl,{setup(s){const a=_("settings");let t=h({signIn:ye(Es),sendAccessLink:ye(Us),sendAccessLinkProcess:ye(Qs),setPassword:ye(al),changeSuccess:ye(rl)}),o=_("originKey"),i=h("signIn");ue("pageKey",i);const d=h(a.customizedData?a.customizedData.fonts:Ke.fonts);ue("amFonts",d);let m=g(()=>a.customizedData&&o.value in a.customizedData?a.customizedData[o.value].colors:Ke[o.value].colors);return ue("amColors",m),(r,p)=>(n(),W(Ie(e(t)[e(i)])))}});const dl={class:"am-csd__inner"},pl={class:"am-csd__header"},ml={class:"am-csd__header-text"},_l={class:"am-csd__content"},gl={class:"am-csd__footer"},fl={name:"DeleteProfile"},vl=Object.assign(fl,{props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},customizedOptions:{type:Object,default:()=>({})}},emits:["close","deleteProfile"],setup(s,{emit:a}){const t=s;let o=_("containerWidth");const i=_("labels");function d(u){return Object.keys(t.customizedLabels).length&&t.customizedLabels[u]?t.customizedLabels[u]:i[u]}let m=_("amFonts"),r=_("amColors"),p=g(()=>({"--am-c-csd-text":r.value.colorMainText,"--am-c-csd-bgr":r.value.colorMainBgr,"--am-c-csd-text-op10":x(r.value.colorMainText,.1),"--am-font-family":m.value.fontFamily}));return(u,y)=>(n(),W(st,{visibility:e(t).visibility,"custom-class":"am-csd am-csd__cancel",style:ce(e(p)),position:"center"},{footer:M(()=>[l("div",gl,[q(he,{category:"secondary",size:e(o)<=360?"small":"default",type:e(t).customizedOptions.closeBtn.buttonType,onClick:y[1]||(y[1]=()=>{a("close")})},{default:M(()=>[de(f(d("close")),1)]),_:1},8,["size","type"]),q(he,{category:"danger",size:e(o)<=360?"small":"default","loading-icon":"loading",type:e(t).customizedOptions.confirmBtn.buttonType,onClick:y[2]||(y[2]=()=>{a("deleteProfile")})},{default:M(()=>[de(f(d("delete")),1)]),_:1},8,["size","type"])])]),default:M(()=>[l("div",dl,[l("div",pl,[l("div",ml,f(d("delete_profile")),1),l("div",{class:"am-csd__header-btn",onClick:y[0]||(y[0]=()=>{a("close")})},[q(Ae,{icon:"close"})])]),l("div",_l,[l("p",null,f(d("delete_profile_description")),1)])])]),_:1},8,["visibility","style"]))}});const Ft={props:{pageWidth:{type:Number,default:768},count:{type:[Number,String],default:2},itemDirection:{type:String,default:"row",validator(s){return["row","row-reverse","column","column-reverse","initial","revert","unset"].includes(s)}}},setup(s){const a=s;let t=g(()=>Pe(a.pageWidth)),o=_("amColors"),i=g(()=>({"--am-c-skeleton-op20":x(o.value.colorMainText,.2),"--am-c-skeleton-op60":x(o.value.colorMainText,.6),"--am-c-flex-direction":a.itemDirection}));return(d,m)=>{const r=ot,p=nt;return n(),W(p,{animated:"",class:"am-cps",style:ce(e(i))},{template:M(()=>[(n(!0),c(ae,null,pe(new Array(e(a).count),u=>(n(),c("div",{key:u,class:H(["am-cps__item",e(t)])},[q(r,{class:"am-cps__item-label",variant:"rect"}),q(r,{class:"am-cps__item-input",variant:"rect"})],2))),128))]),_:1},8,["style"])}}};const bl=l("span",{class:"am-icon-checkmark-circle-full"},null,-1),hl={name:"CabinetProfile",key:"profile"},yl=Object.assign(hl,{setup(s){let a=xe(),t=g(()=>a.getters.getLoading),o=h(null),i=h(0),d=_("sidebarCollapsed");window.addEventListener("resize",m);function m(){o.value&&(i.value=o.value.offsetWidth)}Te(d,N=>{N?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){i.value=o.value.offsetWidth}Fe(()=>{He(()=>{i.value=o.value.offsetWidth})});let p=g(()=>Pe(i.value));const u=_("settings");let y=_("cabinetType"),D=_("amCustomize");const $=_("labels"),w=_("localLanguage");let I=g(()=>u.general.usedLanguages.includes(w.value));function F(N,v){return v&&Object.keys(v).forEach(T=>{v[T][w.value]&&I.value?N[T]=v[T][w.value]:v[T].default&&(N[T]=v[T].default)}),N}let k=g(()=>{let N=ke(be({},$)),v=D.value.profile.translations;return F(N,v)});function V(N){let v={},T=D.value[N].translations;return F(v,T)}let b=g(()=>D.value.profile.options),U=h("first"),G=h("");function R(){Y.value=!1,G.value=""}let Q=h(null),K=h(!1),B=h({firstName:g({get:()=>a.getters["auth/getProfile"].firstName,set:N=>{a.commit("auth/setProfileFirstName",N||"")}}),lastName:g({get:()=>a.getters["auth/getProfile"].lastName,set:N=>{a.commit("auth/setProfileLastName",N||"")}}),email:g({get:()=>a.getters["auth/getProfile"].email,set:N=>{a.commit("auth/setProfileEmail",N||"")}}),phone:g({get:()=>a.getters["auth/getProfile"].phone,set:N=>{a.commit("auth/setProfilePhone",N||"")}}),birthday:g({get:()=>a.getters["auth/getProfile"].birthday?a.getters["auth/getProfile"].birthday:"",set:N=>{a.commit("auth/setProfileBirthday",N?ve(N).format("YYYY-MM-DD"):"")}})}),O=h({firstName:{template:Se.text,props:{itemName:"firstName",label:k.value.first_name_colon,placeholder:k.value.enter_first_name,class:g(()=>`am-capi__item ${p.value}`)}},lastName:{template:Se.text,props:{itemName:"lastName",label:k.value.last_name_colon,placeholder:k.value.enter_last_name,class:g(()=>`am-capi__item ${p.value}`)}},email:{template:Se.text,props:{itemName:"email",label:k.value.email_colon,placeholder:k.value.enter_email,class:g(()=>`am-capi__item ${p.value}`)}},phone:{countryPhoneIso:g({get:()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:"",set:N=>{a.commit("auth/setProfileCountryPhoneIso",N?N.toLowerCase():"")}}),template:Se.phone,props:{itemName:"phone",label:k.value.phone_colon,placeholder:k.value.enter_phone,defaultCode:g(()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:""),phoneError:g(()=>K.value),whatsAppLabel:k.value.whatsapp_opt_in_text,isWhatsApp:u.notifications.whatsAppEnabled&&u.notifications.whatsAppAccessToken&&u.notifications.whatsAppBusinessID&&u.notifications.whatsAppPhoneID,class:g(()=>`am-capi__item ${p.value}`)}},birthday:{template:Se.datepicker,props:{itemName:"birthday",label:k.value.date_of_birth,placeholder:k.value.enter_date_of_birth,clearable:!0,readOnly:!1,class:g(()=>`am-capi__item am-capi__item-birthday ${p.value}`)}}}),P=h({firstName:[{required:!0,message:k.value.enter_first_name_warning,trigger:"submit"}],lastName:[{required:b.value.lastName.required,message:k.value.enter_last_name_warning,trigger:"submit"}],email:[{required:b.value.email.required,type:"email",message:k.value.enter_valid_email_warning,trigger:"submit"}],phone:[{required:b.value.phone.required,message:k.value.enter_phone_warning,trigger:"submit"}],birthday:[{required:b.value.birthday.required,message:k.value.enter_date_of_birth_warning,trigger:"submit"}]}),S=h(!1);ue("deleteProfileDialog",S);function L(){a.commit("auth/setProfileFirstName",B.value.firstName?B.value.firstName.trim():""),a.commit("auth/setProfileLastName",B.value.lastName?B.value.lastName.trim():""),a.commit("auth/setProfileEmail",B.value.email?B.value.email.trim():""),Q.value.validate(N=>{if(N){G.value=k.value.profile_data_success;let v=a.getters["auth/getProfile"];a.commit("setLoading",!0),Ce.post("/users/"+y.value+"s/"+v.id,v,De(a)).finally(()=>{a.commit("setLoading",!1),Y.value=!0,b.value.phone.required&&B.value.phone&&(K.value=!1)})}else return b.value.phone.required&&!B.value.phone&&(K.value=!0),!1})}ue("saveProfileChanges",L);let A=h(null),Z=h({newPass:g({get:()=>a.getters["auth/getNewPassword"],set:N=>{a.commit("auth/setNewPassword",N||"")}}),confirmPass:g({get:()=>a.getters["auth/getConfirmPassword"],set:N=>{a.commit("auth/setConfirmPassword",N||"")}})}),ne=h({newPass:{template:Se.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:k.value.new_password_colon,placeholder:"",minLength:3,class:g(()=>`am-capp__item ${p.value}`)}},confirmPass:{template:Se.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:k.value.new_password_colon_retype,placeholder:"",minLength:3,class:g(()=>`am-capp__item ${p.value}`)}}}),se=h({newPass:[{required:!0,message:k.value.new_password_required,trigger:"submit"},{min:4,message:k.value.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:k.value.new_password_required,trigger:"submit"},{min:4,message:k.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:k.value.passwords_not_match,trigger:"submit"}]}),Y=h(!1);function j(){Y.value=!1}function te(){A.value.validate(N=>{if(N){G.value="Password changed Successfully";let v=a.getters["auth/getProfile"];a.commit("setLoading",!0),Ce.post("/users/"+y.value+"s/"+v.id,{password:a.getters["auth/getNewPassword"]},De(a)).then(()=>{a.commit("auth/setNewPassword",""),a.commit("auth/setConfirmPassword","")}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1),Y.value=!0})}else return!1})}ue("changeProfilePassword",te);function ee(){S.value=!1,a.commit("auth/setProfileDeleted",!0),a.dispatch("auth/logout")}function ie(){a.commit("setLoading",!0);let N=a.getters["auth/getProfile"]?a.getters["auth/getProfile"].id:null;if(!N)return;let v={email:"",firstName:k.value.customer,lastName:N,phone:"",birthday:"",gender:"",externalId:"",password:""};const T=lt().cookies;Ce.post("/users/customers/"+N,Object.assign(De(a),v)).then(()=>{a.commit("auth/setProfile",{}),T.remove("ameliaUserEmail"),a.commit("setLoading",!1),ee()}).catch(E=>{a.commit("setLoading",!1),console.log(E)})}let le=_("amColors"),X=g(()=>({"--am-c-capi-primary":le.value.colorPrimary,"--am-c-capi-text":le.value.colorMainText,"--am-c-capi-text-op10":x(le.value.colorMainText,.1)}));return(N,v)=>{const T=Re,E=It,J=Et;return n(),c("div",{ref_key:"pageContainer",ref:o,class:"am-capi",style:ce(e(X))},[e(Y)?(n(),W(Ee,{key:0,type:"success","show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:R,onTriggerClose:R},{title:M(()=>[bl,de(" "+f(e(G)),1)]),_:1})):C("",!0),q(J,{modelValue:e(U),"onUpdate:modelValue":v[0]||(v[0]=z=>me(U)?U.value=z:U=z),class:"am-capi__tabs",onTabClick:j},{default:M(()=>[q(E,{class:"am-capi__tabs-item",label:e(k).personal_info,name:"first"},{default:M(()=>[e(t)?(n(),W(Ft,{key:1,count:5,"page-width":e(i)},null,8,["page-width"])):(n(),c(ae,{key:0},[e(a).getters["auth/getProfile"]?(n(),W(T,{key:0,ref_key:"infoFormRef",ref:Q,model:e(B),rules:e(P),"label-position":"top",class:H(["am-capi__form",e(p)])},{default:M(()=>[(n(!0),c(ae,null,pe(e(D).profile.order,z=>(n(),c(ae,{key:z.id},[!e(b)[z.id]||e(b)[z.id].visibility?(n(),W(Ie(e(O)[z.id].template),Ne({key:0,ref_for:!0,ref:"customerCollectorRef",modelValue:e(B)[z.id],"onUpdate:modelValue":_e=>e(B)[z.id]=_e,countryPhoneIso:e(O)[z.id].countryPhoneIso,"onUpdate:countryPhoneIso":_e=>e(O)[z.id].countryPhoneIso=_e},e(O)[z.id].props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"])):C("",!0)],64))),128))]),_:1},8,["model","rules","class"])):C("",!0)],64))]),_:1},8,["label"]),q(E,{class:"am-capi__tabs-item",label:e(k).password_tab,name:"second"},{default:M(()=>[e(t)?(n(),W(Ft,{key:1,"item-direction":"column",count:2,"page-width":e(i)},null,8,["page-width"])):(n(),W(T,{key:0,ref_key:"passFormRef",ref:A,model:e(Z),rules:e(se),"label-position":"top",class:H(["am-capi__form",e(p)])},{default:M(()=>[(n(!0),c(ae,null,pe(e(ne),(z,_e)=>(n(),W(Ie(z.template),Ne({key:z.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:e(Z)[_e],"onUpdate:modelValue":je=>e(Z)[_e]=je},z.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]))]),_:1},8,["label"])]),_:1},8,["modelValue"]),q(vl,{visibility:e(S),"customized-labels":V("deleteProfile"),"customized-options":e(D).deleteProfile.options,onClose:v[1]||(v[1]=z=>me(S)?S.value=!1:S=!1),onDeleteProfile:ie},null,8,["visibility","customized-labels","customized-options"]),q(Ia,{loading:e(t),display:e(U),"parent-width":e(i),"customized-labels":e(k),"save-footer-button":e(b).saveFooterButton.buttonType,"delete-footer-type":e(b).deleteFooterButton.buttonType,"pass-footer-button":e(b).passFooterButton.buttonType},null,8,["loading","display","parent-width","customized-labels","save-footer-button","delete-footer-type","pass-footer-button"])],4)}}});const kl={key:0,class:"am-capf__zone"},xl={class:"am-capf__menu"},Cl={key:2},Tl=l("span",{class:"am-icon-filter"},null,-1),$l={key:0},Pl={key:0,class:"am-capf__list"},Ll=["onClick"],wl=l("span",{class:"am-icon-close"},null,-1),Sl=[wl],Dl={name:"CabinetFilters"},yt=Object.assign(Dl,{props:{paramList:{type:[Object,Array],default:()=>[]},stepKey:{type:String,default:""},responsiveClass:{type:String,default:""},empty:{type:Boolean,default:!1}},emits:["changeFilters"],setup(s,{emit:a}){const t=s;let o=xe(),i=g(()=>o.getters.getLoading),d=g(()=>t.stepKey==="packages"?"packagesList":t.stepKey);const m=_("settings");let r=_("amCustomize");const p=_("labels"),u=_("localLanguage");let y=g(()=>m.general.usedLanguages.includes(u.value)),D=g(()=>{let P=ke(be({},p));if(t.stepKey){let S=r.value[d.value].translations;S&&Object.keys(S).forEach(L=>{S[L][u.value]&&y.value?P[L]=S[L][u.value]:S[L].default&&(P[L]=S[L].default)})}return P});function $(P){return P==="services"?"service":P==="providers"?"employee":P==="locations"?"locations":P==="packages"?"shipment":P==="events"?"star-outline":""}function w(){a("changeFilters")}let I=_("containerWidth"),F={components:{IconComponent:Ae},template:'<IconComponent icon="filter"/>'},k=h(!1),V=h({dates:g({get:()=>o.getters["cabinetFilters/getDates"],set:P=>{ua(),o.commit("cabinetFilters/setDates",P),a("changeFilters")}}),services:g({get:()=>o.getters["cabinetFilters/getServices"],set:P=>{o.commit("cabinetFilters/setServices",P)}}),providers:g({get:()=>o.getters["cabinetFilters/getProviders"],set:P=>{o.commit("cabinetFilters/setProviders",P)}}),locations:g({get:()=>o.getters["cabinetFilters/getLocations"],set:P=>{o.commit("cabinetFilters/setLocations",P)}}),packages:g({get:()=>o.getters["cabinetFilters/getPackages"],set:P=>{o.commit("cabinetFilters/setPackages",P)}}),events:g({get:()=>o.getters["cabinetFilters/getEvents"],set:P=>{o.commit("cabinetFilters/setEvents",P)}})}),b=g(()=>t.stepKey==="events"?o.getters["cabinetFilters/getEventFiltersOption"]:t.stepKey==="packages"?o.getters["cabinetFilters/getPackageFilterOptions"]:o.getters["cabinetFilters/getAppointmentFilterOptions"]),U=g(()=>{let P=0;return Object.keys(b.value).forEach(S=>{b.value[S].length>0&&r.value[d.value].options[`${S}Filter`].visibility&&P++}),P});function G(P){let S=P.charAt(0).toUpperCase()+P.slice(1);o.commit(`cabinetFilters/set${S}`,[]),a("changeFilters")}let R=g(()=>r.value[d.value].options),Q=g(()=>t.stepKey==="appointments"?R.value.servicesFilter.visibility||R.value.providersFilter.visibility||R.value.locationsFilter.visibility:t.stepKey==="events"?R.value.eventsFilter.visibility||R.value.providersFilter.visibility||R.value.locationsFilter.visibility:R.value.packagesFilter.visibility||R.value.servicesFilter.visibility||R.value.providersFilter.visibility||R.value.locationsFilter.visibility),K=g(()=>t.stepKey==="appointments"?!!(b.value.services.length||b.value.providers.length||b.value.locations.length):t.stepKey==="events"?!!(b.value.events.length||b.value.providers.length||b.value.locations.length):!!(b.value.packages.length||b.value.services.length||b.value.providers.length||b.value.locations.length)),B=_("amColors"),O=g(()=>({"--am-c-capf-heading-text":B.value.colorMainText,"--am-c-capf-text":B.value.colorInpText,"--am-c-capf-text-op10":x(B.value.colorInpText,.1),"--am-c-select-border":B.value.colorInpBorder,"--am-c-select-bgr":B.value.colorInpBgr}));return(P,S)=>e(i)?C("",!0):(n(),c("div",{key:0,class:"am-capf",style:ce(e(O))},[e(I)<=480&&e(R).timeZone.visibility&&e(t).stepKey!=="packages"?(n(),c("div",kl,[q(mt,{size:"small"})])):C("",!0),l("div",xl,[e(I)<=480&&e(R).timeZone.visibility&&e(t).stepKey==="packages"?(n(),W(mt,{key:0,size:"small"})):C("",!0),e(t).stepKey!=="packages"?(n(),W(Ya,{key:1,modelValue:e(V).dates,"onUpdate:modelValue":S[0]||(S[0]=L=>e(V).dates=L),type:"daterange",editable:!1,size:"small",clearable:!1,format:e(da)(),style:ce(e(O)),lang:e(u),class:"am-capf__menu-datepicker","popper-class":"am-capf__menu-datepicker-popper","custom-input-display":!0},null,8,["modelValue","format","style","lang"])):C("",!0),!e(t).empty&&e(Q)&&e(K)?(n(),c("div",Cl,[q(he,{icon:e(F),"icon-only":e(I)<=700,"custom-class":"am-capf__menu-btn",size:"small",category:"primary",type:e(R).filterBtn?e(R).filterBtn.buttonType:"filled",onClick:S[1]||(S[1]=L=>me(k)?k.value=!e(k):k=!e(k))},{default:M(()=>[Tl,e(I)>700?(n(),c("span",$l,f(e(D).filters),1)):C("",!0)]),_:1},8,["icon","icon-only","type"])])):C("",!0)]),q(Be,{name:"am-slide-fade"},{default:M(()=>[e(k)&&!e(t).empty?(n(),c("div",Pl,[(n(!0),c(ae,null,pe(Object.keys(e(b)),L=>(n(),c(ae,{key:L},[e(b)[L].length>0&&e(r)[e(d)].options[`${L}Filter`].visibility?(n(),c("span",{key:0,class:H(["am-capf__list-item",[{"am-selected":e(V)[L].length>0},`am-capf__list-item-${e(U)}`,e(t).responsiveClass]])},[q(Xe,{id:`am-select-${L}`,modelValue:e(V)[L],"onUpdate:modelValue":A=>e(V)[L]=A,multiple:!0,placeholder:e(D)[`${L}_dropdown`],"prefix-icon":$(L),"collapse-tags":!0,size:"small","popper-class":"am-filter-select-popper",onChange:w},{default:M(()=>[(n(!0),c(ae,null,pe(e(b)[L],A=>(n(),W(Qe,{key:A.id,value:A.id,label:A.firstName?A.firstName+" "+A.lastName:A.name},null,8,["value","label"]))),128))]),_:2},1032,["id","modelValue","onUpdate:modelValue","placeholder","prefix-icon"]),e(V)[L].length>0?(n(),c("span",{key:0,class:"am-capf__clear",onClick:A=>G(L)},Sl,8,Ll)):C("",!0)],2)):C("",!0)],64))),128))])):C("",!0)]),_:1})],4))}});function Fl(s,a){let t=s.getters["entities/getService"](a.serviceId),o=0,i=0;return a.bookings.forEach(d=>{if(["approved","pending"].includes(d.status)){let m=d.duration?d.duration:t.duration;m>o&&(o=m);let r=0;d.extras.forEach(p=>{r+=t.extras.find(y=>y.id===p.extraId).duration*p.quantity}),r>i&&(i=r)}}),o+i}function Ut(s,a){for(let t in s)s[t].appointments.forEach(o=>{let i={};o.bookings.forEach(m=>{m.customerId in i||(i[m.customerId]=[]),i[m.customerId][m.id]=m.status});let d={};for(let m in i)for(let r in i[m])(!(m in d)||i[m][r]==="approved"||i[m][r]==="pending")&&(d[m]=r);o.bookings.forEach(m=>{m.customerId in d&&parseInt(m.id)!==parseInt(d[m.customerId])||(a===""&&(o.bookingStart=Ge(o.bookingStart),o.bookingEnd=Ge(o.bookingEnd)),o.bookings=[m])})});if(a===""){let t={};for(let o in s)s[o].appointments.forEach(i=>{let d=i.bookingStart.split(" ")[0];d in t?t[d].appointments.push(i):t[d]={appointments:[i],date:d}});return t}return s}function Wt(s){let a=[];return s.forEach(t=>{if(["approved","pending"].includes(t.status)&&t.customFields){let o=JSON.parse(t.customFields);Object.keys(o).forEach(i=>{a.push({label:o[i].label,value:o[i].value})})}}),a}function Ml(s,a){let t=[];return s.forEach(o=>{["approved","pending"].includes(o.status)&&o.extras.forEach(i=>{t.push(Object.assign(i,a.extras.find(d=>d.id===i.extraId)))})}),t}const Ol={class:"am-cc__periods-date"},zl={class:"am-cc__periods-time"},Bl={key:0,class:"am-cc__periods-link__list"},Il=["href"],El=l("span",{class:"am-icon-link"},null,-1),Al=["href"],jl=l("span",{class:"am-icon-link"},null,-1),Nl=["href"],Vl=l("span",{class:"am-icon-link"},null,-1),Yl={name:"TemplatePeriods"},Ul=Object.assign(Yl,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s,t=_("amLabels");let o=_("containerWidth"),i=g(()=>Pe(o.value));return(d,m)=>(n(),c("div",{class:H(["am-cc__periods",e(i)])},[(n(!0),c(ae,null,pe(e(a).data,(r,p)=>(n(),c("div",{key:p,class:"am-cc__periods-item"},[l("span",Ol,f(e(Me)(r.date)),1),l("span",zl,f(`${e(et)(r.startTime)} - ${e(et)(r.endTime)}`),1),r.googleMeetLink||r.zoomLink||r.lessonSpaceLink?(n(),c("div",Bl,[r.googleMeetLink?(n(),c("a",{key:0,class:"am-cc__periods-link",href:r.googleMeetLink,target:"_blank"},[El,de(" "+f(e(t).google_meet_link),1)],8,Il)):C("",!0),r.zoomLink?(n(),c("a",{key:1,class:"am-cc__periods-link",href:r.zoomLink,target:"_blank"},[jl,de(" "+f(e(t).zoom_link),1)],8,Al)):C("",!0),r.lessonSpaceLink?(n(),c("a",{key:2,class:"am-cc__periods-link",href:r.lessonSpaceLink,target:"_blank"},[Vl,de(" "+f(e(t).lesson_space_link),1)],8,Nl)):C("",!0)])):C("",!0)]))),128))],2))}});const Wl={class:"am-cc__extras-name"},ql={key:0,class:"am-cc__extras-duration"},Zl={key:1,class:"am-cc__extras-price"},Rl={key:2,class:"am-cc__extras-quantity"},Hl={name:"TemplateExtras"},Jl=Object.assign(Hl,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s,t=_("amLabels");let o=_("containerWidth"),i=g(()=>Pe(o.value));return(d,m)=>(n(),c("div",{class:H(["am-cc__extras",e(i)])},[(n(!0),c(ae,null,pe(e(a).data,(r,p)=>(n(),c("div",{key:p,class:"am-cc__extras-item"},[l("span",Wl,f(r.name),1),r.duration||r.price||r.quantity?(n(),c("div",{key:0,class:H(["am-cc__extras-item__inner",[{"am-flex-space":!r.price&&r.duration},{"am-flex-end":!r.duration}]])},[r.duration?(n(),c("span",ql,f(e(At)(r.duration,e(t).h,e(t).min)),1)):C("",!0),r.price?(n(),c("span",Zl,f(e(tt)(r.price)),1)):C("",!0),r.quantity?(n(),c("span",Rl," x"+f(r.quantity),1)):C("",!0)],2)):C("",!0)]))),128))],2))}});const Gl={class:"am-cc__tickets-item_inner"},Ql={class:"am-cc__tickets-name"},Xl={class:"am-cc__tickets-calc"},Kl={class:"am-cc__tickets-price"},eo={name:"TemplateTickets"},to=Object.assign(eo,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s,t=_("amLabels");let o=_("containerWidth"),i=g(()=>Pe(o.value));return(d,m)=>(n(),c("div",{class:H(["am-cc__tickets",e(i)])},[(n(!0),c(ae,null,pe(e(a).data,(r,p)=>(n(),c("div",{key:p,class:"am-cc__tickets-item"},[l("div",Gl,[l("span",Ql,f(r.name),1),l("span",Xl,f(`${r.persons} ${r.persons>1?e(t).event_tickets:e(t).event_ticket} x ${e(tt)(r.price)}`),1)]),l("div",Kl,f(e(tt)(r.persons*r.price)),1)]))),128))],2))}});const ao=["innerHTML"],so={class:"am-cc__cf-value"},lo={class:"am-cc__cf-value__inner"},oo={name:"TemplateCustomFields"},no=Object.assign(oo,{props:{data:{type:[Array,Object,String]}},setup(s){const a=s;let t=_("containerWidth"),o=g(()=>Pe(t.value));function i(d){return d?Array.isArray(d)?d.length===0?"/":d.map(m=>typeof m=="object"&&m!==null&&!Array.isArray(m)?m.name||"/":m||"/").join(", "):d:"/"}return(d,m)=>(n(),c("div",{class:H(["am-cc__cf",e(o)])},[(n(!0),c(ae,null,pe(e(a).data,(r,p)=>(n(),c("div",{key:p,class:"am-cc__cf-item"},[l("span",{class:"am-cc__cf-name",innerHTML:r.label},null,8,ao),l("div",so,[l("span",lo,f(i(r.value)),1)])]))),128))],2))}});const io={class:"am-cc__employee-heading"},ro={class:"am-cc__employee-heading__inner"},co={class:"am-cc__employee-name"},uo=["innerHTML"],po={key:1,class:"am-cc__employee-wrapper"},mo={class:"am-cc__employee-heading"},_o={class:"am-cc__employee-heading__inner"},go={class:"am-cc__employee-name"},fo=["innerHTML"],vo={name:"TemplateEmployee"},bo=Object.assign(vo,{props:{data:{type:[Object,Array]}},setup(s){const a=s;let t=g(()=>!Array.isArray(a.data)),o=_("containerWidth"),i=g(()=>Pe(o.value));function d(p){let u=p.firstName.charAt(0).toUpperCase(),y=p.lastName.charAt(0).toUpperCase();return`${u}${y}`}function m(p){return p.pictureThumbPath?{backgroundImage:`url(${p.pictureThumbPath})`}:{}}function r(p){return p&&p.includes("<!-- Content -->")?p.slice(16).length:p?p.length:!1}return(p,u)=>(n(),c("div",{class:H(["am-cc__employee",e(i)])},[e(t)?(n(),c(ae,{key:0},[l("div",io,[l("span",{class:"am-cc__employee-img",style:ce(m(e(a).data))},[e(a).data.pictureThumbPath?C("",!0):(n(),c(ae,{key:0},[de(f(d(e(a).data)),1)],64))],4),l("div",ro,[l("span",co,f(`${e(a).data.firstName} ${e(a).data.lastName}`),1),e(a).data.badge?(n(),c("span",{key:0,class:"am-cc__employee-badge",style:ce({background:e(a).data.badge.color})},f(e(a).data.badge.content),5)):C("",!0)])]),e(a).data.description?(n(),c("div",{key:0,class:H(["am-cc__employee-desc",{"ql-description":e(a).data.description.includes("<!-- Content -->")}]),innerHTML:e(a).data.description},null,10,uo)):C("",!0)],64)):(n(),c("div",po,[(n(!0),c(ae,null,pe(e(a).data,y=>(n(),c(ae,{key:y.id},[l("div",mo,[l("span",{class:"am-cc__employee-img",style:ce(m(y))},[y.pictureThumbPath?C("",!0):(n(),c(ae,{key:0},[de(f(d(y)),1)],64))],4),l("div",_o,[l("span",go,f(`${y.firstName} ${y.lastName}`),1),y.badge?(n(),c("span",{key:0,class:"am-cc__employee-badge",style:ce({background:y.badge.color})},f(y.badge.content),5)):C("",!0)])]),r(y.description)?(n(),c("div",{key:0,class:H(["am-cc__employee-desc",{"ql-description":y.description.includes("<!-- Content -->")}]),innerHTML:y.description},null,10,fo)):C("",!0)],64))),128))]))],2))}});const ho={class:"am-cc__popover-inner"},yo={key:0,class:"am-cc__popover-heading"},ko={name:"CollapseCardPopoverTemplate"},qe=Object.assign(ko,{props:{headerText:{type:String,default:""},type:{type:String,required:!0},contentData:{type:[Array,Object,String],default:""}},setup(s){const a=s;let t=h({period:ye(Ul),extras:ye(Jl),ticket:ye(to),customField:ye(no),employee:ye(bo)}),o=_("amFonts"),i=_("amColors"),d=g(()=>({"--am-c-cc-primary":i.value.colorPrimary,"--am-c-cc-primary-op70":x(i.value.colorPrimary,.7),"--am-c-cc-success":i.value.colorSuccess,"--am-c-cc-success-op15":x(i.value.colorSuccess,.15),"--am-c-cc-bgr":i.value.colorMainBgr,"--am-c-cc-text":i.value.colorMainText,"--am-c-cc-text-op10":x(i.value.colorMainText,.1),"--am-c-cc-text-op15":x(i.value.colorMainText,.15),"--am-c-cc-text-op70":x(i.value.colorMainText,.7),"--am-c-cc-text-op80":x(i.value.colorMainText,.8),"--am-c-cc-text-op90":x(i.value.colorMainText,.9),"--am-c-scroll-op30":x(i.value.colorPrimary,.3),"--am-c-scroll-op10":x(i.value.colorPrimary,.1),"--am-font-family":o.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(m,r)=>{const p=ft;return n(),W(p,{"show-arrow":!1,persistent:!1,width:"auto","popper-class":"am-cc__popover","popper-style":e(d),trigger:"click"},{reference:M(()=>[Ot(m.$slots,"default")]),default:M(()=>[l("div",ho,[e(a).headerText?(n(),c("div",yo,f(e(a).headerText),1)):C("",!0),(n(),W(Ie(e(t)[e(a).type]),{class:"am-cc__popover-content",data:e(a).contentData},null,8,["data"]))])]),_:3},8,["popper-style"])}}});function xo(s){let a=zt(null,s.coupon,s.tax?s.tax[0]:null,s.price-s.price/100*s.discount,!1);return a.price-a.discount+a.tax}const Ue=ke(window.wpAmeliaLabels);function Mt(s,a,t,o=null){t.type==="package"&&s.commit("cabinet/setPackageLoading",!0),t.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!0),t.type==="event"&&s.commit("cabinet/setEventsLoading",!0),s.commit("cabinet/setPaymentLinkLoader",t.bookings?t.bookings[0].id:t.id);let i=JSON.parse(JSON.stringify(t)),d=JSON.parse(JSON.stringify(s.getters["auth/getProfile"]));d.birthday=null,i.customer=d,i.type!=="package"?(i[i.type]=t,i.booking=t.bookings[0],i.paymentId=t.bookings[0].payments[0].id):i=Object.assign(i,i.package),Ce.post("/payments/link",{data:i,paymentMethod:a}).then(m=>{!m.data.data.error&&m.data.data.paymentLink?window.location.href=m.data.data.paymentLink:s.commit("cabinet/setPaymentLinkError",{value:!0,type:t.type})}).catch(m=>{s.commit("cabinet/setPaymentLinkError",{value:!0,type:t.type})}).finally(()=>{s.commit("cabinet/setPaymentLinkLoader",null),t.type==="package"&&s.commit("cabinet/setPackageLoading",!1),t.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!1),t.type==="event"&&s.commit("cabinet/setEventsLoading",!1)})}function _t(s,a){if(s.type!=="package"&&(!s.bookings||s.bookings.length===0))return!1;a=JSON.parse(a);let t=a&&"payments"in a&&a.payments&&"paymentLinks"in a.payments&&a.payments.paymentLinks?a.payments.paymentLinks:ze.payments.paymentLinks,o=!1;switch(s.type){case"package":o=!s.end||ve(s.end,"YYYY-MM-DD HH:mm").isAfter(ve());break;case"appointment":o=ve(s.bookingStart,"YYYY-MM-DD HH:mm:ss").isAfter(ve())&&s.bookings[0].payments.length>0;break;case"event":o=ve(s.periods[s.periods.length-1].periodEnd,"YYYY-MM-DD HH:mm:ss").isAfter(ve())&&s.bookings[0].payments.length>0;break}return gt(ze).length&&ze&&t&&t.enabled&&o}function gt(s){typeof s=="string"&&(s=JSON.parse(s));let a=[];return s=s.payments,ze.payments.wc.enabled?a.push({value:"wc",label:Ue.wc}):ze.payments.mollie.enabled&&(!("mollie"in s)||s.mollie.enabled)?a.push({value:"mollie",label:Ue.on_line}):(ze.payments.payPal.enabled&&(!("payPal"in s)||s.payPal.enabled)&&a.push({value:"payPal",label:Ue.pay_pal}),ze.payments.stripe.enabled&&(!("stripe"in s)||s.stripe.enabled)&&a.push({value:"stripe",label:Ue.credit_card}),ze.payments.razorpay.enabled&&(!("razorpay"in s)||s.razorpay.enabled)&&a.push({value:"razorpay",label:Ue.razorpay}),ze.payments.square.enabled&&(!("square"in s)||s.square.enabled)&&a.push({value:"square",label:Ue.square})),a}function Je(s,a){switch(a.type){case"appointment":{let t=jt(s,{price:a.bookings[0].price,persons:a.bookings[0].persons,aggregatedPrice:a.bookings[0].aggregatedPrice,extras:a.bookings[0].extras,serviceId:null,tax:a.bookings[0].tax,coupon:a.bookings[0].coupon},!1);return t.total-t.discount+t.tax>a.bookings[0].payments.filter(o=>o.status!=="refunded"&&o.status!=="pending").reduce((o,i)=>o+i.amount,0)}case"event":return Vt(a)>a.bookings[0].payments.filter(t=>t.status!=="refunded"&&t.status!=="pending").reduce((t,o)=>t+o.amount,0);case"package":return xo(a)>a.payments.filter(t=>t.status!=="refunded"&&t.status!=="pending").reduce((t,o)=>t+o.amount,0)}}const Co={class:"am-cc__edit"},To=["onClick"],$o={class:"am-cc__edit-text"},Po={name:"PaymentButton"},qt=Object.assign(Po,{props:{reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},type:{type:String},btnSize:{type:String,default:"mini"},class:{type:String,default:""}},setup(s){const a=s;let t=xe();const o=_("amLabels");let i=g(()=>gt(a.bookable.settings)),d=g(()=>t.getters["cabinet/getPaymentLinkLoader"]),m=Nt({components:{IconComponent:Ae},template:'<IconComponent icon="arrow-down"></IconComponent>'}),r=h(!1);function p(F){F.stopPropagation(),i.value.length===1?Mt(t,i.value[0].value,a.reservation):r.value=!r.value}function u(){r.value=!1}let y=h(!1);function D(){y.value=!1}let $=_("amFonts"),w=_("amColors"),I=g(()=>({"--am-c-cc-primary":w.value.colorPrimary,"--am-c-cc-primary-op70":x(w.value.colorPrimary,.7),"--am-c-cc-error":w.value.colorError,"--am-c-cc-error-op15":x(w.value.colorError,.15),"--am-c-cc-warning":w.value.colorWarning,"--am-c-cc-warning-op15":x(w.value.colorWarning,.15),"--am-c-cc-success":w.value.colorSuccess,"--am-c-cc-success-op15":x(w.value.colorSuccess,.15),"--am-c-cc-bgr":w.value.colorMainBgr,"--am-c-cc-text":w.value.colorMainText,"--am-c-cc-text-op10":x(w.value.colorMainText,.1),"--am-c-cc-text-op15":x(w.value.colorMainText,.15),"--am-c-cc-text-op70":x(w.value.colorMainText,.7),"--am-c-cc-text-op90":x(w.value.colorMainText,.9),"--am-font-family":$.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(F,k)=>{const V=ft;return e(_t)(e(a).reservation,e(a).bookable.settings)?(n(),W(V,{key:0,ref:"payRef",visible:e(r),"onUpdate:visible":k[0]||(k[0]=b=>me(r)?r.value=b:r=b),persistent:!1,"show-arrow":!1,"popper-class":"am-cc__popper","popper-style":e(I),trigger:"click"},{reference:M(()=>[q(he,{size:e(a).btnSize,type:e(a).type,suffix:e(i).length>1&&e(Je)(e(t),e(a).reservation)?e(m):"",class:H([{"am-button-single":e(i).length===1||!e(Je)(e(t),e(a).reservation)},e(a).class]),loading:!!e(d),"loading-icon":"loading",disabled:!e(Je)(e(t),e(a).reservation),onClick:p},{default:M(()=>[de(f(e(Je)(e(t),e(a).reservation)?e(o).pay_now_btn:e(o).paid),1)]),_:1},8,["size","type","suffix","class","loading","disabled"])]),default:M(()=>[at((n(),c("div",Co,[(n(!0),c(ae,null,pe(e(gt)(e(a).bookable.settings),b=>at((n(),c("div",{key:b.value,class:"am-cc__edit-item",onClick:U=>e(Mt)(e(t),b.value,e(a).reservation)},[l("span",$o,f(b.label),1)],8,To)),[[e(dt),u]])),128))])),[[e(dt),D]])]),_:1},8,["visible","popper-style"])):C("",!0)}}});const Lo={class:"am-cc__time"},wo={key:0,class:"am-cc__name"},So={key:0,class:"am-cc__name"},Do={class:"am-cc__edit"},Fo=l("span",{class:"am-icon-date-time"},null,-1),Mo={class:"am-cc__edit-text"},Oo=l("span",{class:"am-icon-clearable"},null,-1),zo={class:"am-cc__edit-text"},Bo={class:"am-cc__content-inner"},Io={class:"am-cc__data"},Eo=l("span",{class:"am-icon-user"},null,-1),Ao={class:"am-cc__data-text"},jo={key:1,class:"am-cc__data"},No=l("span",{class:"am-icon-payments"},null,-1),Vo={class:"am-cc__data-text"},Yo={key:2,class:"am-cc__data"},Uo=l("span",{class:"am-icon-clock"},null,-1),Wo={class:"am-cc__data-text"},qo={class:"am-cc__data"},Zo=l("span",{class:"am-icon-clock"},null,-1),Ro={class:"am-cc__data-text"},Ho={key:4,class:"am-cc__data link"},Jo=l("span",{class:"am-icon-link"},null,-1),Go=["href"],Qo={key:5,class:"am-cc__data link"},Xo=l("span",{class:"am-icon-link"},null,-1),Ko=["href"],en={key:6,class:"am-cc__data link"},tn=l("span",{class:"am-icon-link"},null,-1),an=["href"],sn={class:"am-cc__data"},ln=l("span",{class:"am-icon-border-plus"},null,-1),on={class:"am-cc__data-text"},nn={class:"am-cc__data"},rn=l("span",{class:"am-icon-file-text"},null,-1),cn={class:"am-cc__data-text"},un={class:"am-cc__data"},dn=l("span",{class:"am-icon-tickets"},null,-1),pn={class:"am-cc__data-text"},mn=l("span",{class:"am-icon-locations"},null,-1),_n=["href"],gn={key:1,class:"am-cc__data-text"},fn={name:"CollapseCard"},Zt=Object.assign(fn,{props:{start:{type:[String,Object,Array,Function],required:!0},name:{type:String,default:""},employee:{type:[Object,Array],default:()=>{}},location:{type:[String,Object],default:""},price:{type:Number,default:0},duration:{type:Number,default:0},periods:{type:Array,default:()=>{}},extras:{type:Array,default:()=>{}},tickets:{type:Array,default:()=>{}},customFields:{type:Array,default:()=>[]},googleMeetLink:{type:String,default:""},zoomLink:{type:String,default:""},lessonSpaceLink:{type:String,default:""},reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},booking:{type:Object,default:()=>{}},isPackageBooking:{type:Boolean,default:!1},responsiveClass:{type:String,default:""},parentWidth:{type:Number,default:1200},customizedOptions:{type:Object,required:!0}},emits:["cancelBooking","rescheduling"],setup(s,{emit:a}){const t=s,o=_("settings"),i=_("amLabels");let d=h(!1);function m(I){I.stopPropagation(),d.value=!d.value}function r(){d.value=!1}function p(){a("cancelBooking",t.booking),d.value=!1}function u(){a("rescheduling",t.reservation,t.booking),d.value=!1}function y(I){return Array.isArray(I)?i.value.event_staff:!Array.isArray(I)&&I.rank&&I.rank==="organizer"?i.value.event_organizer:`${t.employee.firstName} ${t.employee.lastName}`}let D=_("amFonts"),$=_("amColors"),w=g(()=>({"--am-c-cc-primary":$.value.colorPrimary,"--am-c-cc-primary-op70":x($.value.colorPrimary,.7),"--am-c-cc-error":$.value.colorError,"--am-c-cc-error-op15":x($.value.colorError,.15),"--am-c-cc-warning":$.value.colorWarning,"--am-c-cc-warning-op15":x($.value.colorWarning,.15),"--am-c-cc-success":$.value.colorSuccess,"--am-c-cc-success-op15":x($.value.colorSuccess,.15),"--am-c-cc-bgr":$.value.colorMainBgr,"--am-c-cc-text":$.value.colorMainText,"--am-c-cc-text-op03":x($.value.colorMainText,.03),"--am-c-cc-text-op10":x($.value.colorMainText,.1),"--am-c-cc-text-op15":x($.value.colorMainText,.15),"--am-c-cc-text-op70":x($.value.colorMainText,.7),"--am-c-cc-text-op90":x($.value.colorMainText,.9),"--am-font-family":D.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px"}));return(I,F)=>{const k=ft;return n(),c("div",{class:"am-cc",style:ce(e(w))},[q(ma,null,{default:M(()=>[q(pa,{"heading-class":"am-cc__heading-wrapper",side:e(t).parentWidth>500},{heading:M(()=>[l("div",{class:H(["am-cc__heading",e(t).responsiveClass])},[l("div",{class:H(["am-cc__heading-info",e(t).responsiveClass])},[l("div",{class:H(["am-cc__heading-info__part",e(t).responsiveClass])},[l("div",Lo,f(e(t).start),1),e(t).parentWidth>650?(n(),c("div",wo,f(e(t).name),1)):C("",!0),e(t).parentWidth<=650?(n(),c("div",{key:1,class:H(["am-cc__status",`am-cc__status-${e(t).booking.status}`])},f(e(i)[e(t).booking.status]),3)):C("",!0)],2),l("div",{class:H(["am-cc__heading-info__part",e(t).responsiveClass])},[e(t).parentWidth<=650?(n(),c("div",So,f(e(t).name),1)):C("",!0),e(t).parentWidth>650?(n(),c("div",{key:1,class:H(["am-cc__status",`am-cc__status-${e(t).booking.status}`])},f(e(i)[e(t).booking.status]),3)):C("",!0)],2)],2),(e(t).booking.status==="approved"||e(t).booking.status==="pending"||e(t).booking.status==="waiting")&&(!e(t).isPackageBooking&&e(t).booking.price>0&&e(_t)(e(t).reservation,e(t).bookable.settings)||!!(e(t).reservation.cancelable||e(o).roles.allowCustomerReschedule&&e(t).reservation.reschedulable))?(n(),c("div",{key:0,class:H(["am-cc__heading-actions",e(t).responsiveClass])},[e(t).booking.status!=="waiting"&&!e(t).isPackageBooking&&e(t).booking.price>0&&e(_t)(e(t).reservation,e(t).bookable.settings)?(n(),W(qt,{key:0,reservation:e(t).reservation,bookable:e(t).bookable},null,8,["reservation","bookable"])):C("",!0),e(t).reservation.cancelable||e(o).roles.allowCustomerReschedule&&e(t).reservation.reschedulable?(n(),W(k,{key:1,ref:"editRef",visible:e(d),"onUpdate:visible":F[0]||(F[0]=V=>me(d)?d.value=V:d=V),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":e(w),trigger:"click"},{reference:M(()=>[e(t).booking?(n(),c("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:m})):C("",!0)]),default:M(()=>[at((n(),c("div",Do,[e(t).reservation.type==="appointment"&&e(o).roles.allowCustomerReschedule&&e(t).reservation.reschedulable?(n(),c("div",{key:0,class:"am-cc__edit-item",onClick:u},[Fo,l("span",Mo,f(e(i).reschedule),1)])):C("",!0),e(t).reservation.cancelable?(n(),c("div",{key:1,class:"am-cc__edit-item am-delete",onClick:p},[Oo,l("span",zo,f(e(i).cancel),1)])):C("",!0)])),[[e(dt),r]])]),_:1},8,["visible","popper-style"])):C("",!0)],2)):C("",!0)],2)]),default:M(()=>[l("div",{class:H(["am-cc__content",e(t).responsiveClass])},[l("div",Bo,[s.customizedOptions.employee.visibility?(n(),c(ae,{key:0},[(Array.isArray(e(t).employee)?e(t).employee.length:Object.keys(e(t).employee).length)?(n(),W(qe,{key:0,"header-text":Array.isArray(e(t).employee)?e(i).view_employees:e(i).provider_profile,type:"employee","content-data":e(t).employee},{default:M(()=>[l("div",Io,[Eo,l("span",Ao,f(y(e(t).employee)),1)])]),_:1},8,["header-text","content-data"])):C("",!0)],64)):C("",!0),e(t).price&&e(t).customizedOptions.price.visibility?(n(),c("div",jo,[No,l("span",Vo,f(e(tt)(e(t).price)),1)])):C("",!0),e(t).duration?(n(),c("div",Yo,[Uo,l("span",Wo,f(e(At)(e(t).duration,e(i).h,e(i).min)),1)])):C("",!0),s.periods.length?(n(),W(qe,{key:3,"header-text":e(i).event_timetable,type:"period","content-data":e(t).periods},{default:M(()=>[l("div",qo,[Zo,l("span",Ro,f(e(i).event_timetable),1)])]),_:1},8,["header-text","content-data"])):C("",!0),e(t).googleMeetLink?(n(),c("div",Ho,[Jo,l("a",{class:"am-cc__data-text link",href:e(t).googleMeetLink,target:"_blank"},f(e(i).google_meet_link),9,Go)])):C("",!0),e(t).zoomLink?(n(),c("div",Qo,[Xo,l("a",{class:"am-cc__data-text link",href:e(t).zoomLink,target:"_blank"},f(e(i).zoom_link),9,Ko)])):C("",!0),e(t).lessonSpaceLink?(n(),c("div",en,[tn,l("a",{class:"am-cc__data-text link",href:e(t).lessonSpaceLink,target:"_blank"},f(e(i).lesson_space_link),9,an)])):C("",!0),e(t).extras.length?(n(),W(qe,{key:7,"header-text":`${e(t).extras.length} ${e(i).extras}`,type:"extras","content-data":e(t).extras},{default:M(()=>[l("div",sn,[ln,l("span",on,f(`${e(t).extras.length} ${e(i).extras}`),1)])]),_:1},8,["header-text","content-data"])):C("",!0),e(t).customFields.length?(n(),W(qe,{key:8,"header-text":e(i).custom_fields,type:"customField","content-data":e(t).customFields},{default:M(()=>[l("div",nn,[rn,l("span",cn,f(e(i).custom_fields),1)])]),_:1},8,["header-text","content-data"])):C("",!0),e(t).tickets.length?(n(),W(qe,{key:9,"header-text":e(i).event_tickets,type:"ticket","content-data":e(t).tickets},{default:M(()=>[l("div",un,[dn,l("span",pn,f(e(i).event_tickets),1)])]),_:1},8,["header-text","content-data"])):C("",!0),e(t).location?(n(),c("div",{key:10,class:H(["am-cc__data",{link:e(t).location.address}])},[mn,e(t).location.address?(n(),c("a",{key:0,class:"am-cc__data-text",href:`https://maps.google.com/?q=${e(t).location.address}`,target:"_blank"},f(e(t).location.name),9,_n)):(n(),c("span",gn,f(e(t).location.name),1))],2)):C("",!0)])],2)]),_:1},8,["side"])]),_:1})],4)}}});const vn={class:"am-csd__header"},bn={class:"am-csd__header-text"},hn=l("span",{class:"am-icon-clearable"},null,-1),yn={class:"am-csd__footer"},kn={name:"AppointmentBooking"},Rt=Object.assign(kn,{props:{visibility:{type:Boolean,default:!1},appointment:{type:Object,default:null},employees:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},slotsParams:{type:Object,default:()=>{}},labels:{type:Object,required:!0},customizedOptions:{type:Object,required:!0}},emits:["close","success","error","employee-selection","location-selection"],setup(s,{emit:a}){const t=s;let o=xe();const i=_("settings");let d=_("amLabels"),m=h(null),r=h(null);Te(()=>t.appointment,re=>{setTimeout(()=>{Q.value++},200);let oe=JSON.parse(JSON.stringify(re));oe&&oe.bookingStart&&(m.value=oe.bookingStart.split(" ")[0],r.value=oe.bookingStart.split(" ")[1].substring(0,5))});let p=h(null),u=h(0),y=_("sidebarCollapsed");window.addEventListener("resize",D);function D(){p.value&&(u.value=p.value.offsetWidth)}Te(y,re=>{re?setTimeout(()=>{$()},1500):setTimeout(()=>{$()},500)});function $(){u.value=p.value.offsetWidth}Fe(()=>{He(()=>{u.value=p.value.offsetWidth})});let w=g(()=>t.visibility);Te(w,re=>{re&&setTimeout(()=>{u.value=p.value.offsetWidth},300)});let I=g(()=>Pe(u.value)),F=h(!1),k=h(null),V=h("");function b(){F.value=!1,V.value=""}let U=h(null),G=g(()=>U.value?U.value.calendarSlotsLoading:!0),R=_("cabinetType"),Q=h(0),K=h(!1),B=h({employee:null,location:null}),O=h(!0),P=h(!0),S=g(()=>t.appointment&&!t.appointment.id&&(t.employees.length||t.locations.length)&&(t.customizedOptions.employee.visibility||t.customizedOptions.location.visibility)&&(O.value||P.value)),L=h(null),A=g(()=>S.value?{employee:[{required:"employee"in t.customizedOptions?t.customizedOptions.employee.required:!1,message:d.value.please_select_employee,trigger:"submit"}],location:[{required:"location"in t.customizedOptions?t.customizedOptions.location.required:!1,message:d.value.please_select_location,trigger:"submit"}]}:{}),Z=g(()=>{let re={};return B.value.employee?re.providerIds=[B.value.employee]:"providerIds"in t.slotsParams&&t.slotsParams.providerIds.length&&(re.providerIds=t.slotsParams.providerIds),B.value.location?re.locationId=B.value.location:"locationId"in t.slotsParams&&t.slotsParams.locationId?re.locationId=t.slotsParams.locationId:re.locationId=null,Object.assign({},t.slotsParams,re)});function ne(){L.value&&L.value.clearValidate(),K.value=!0,Q.value++,a("employee-selection",B.value.employee),a("location-selection",B.value.location)}function se(re){B.value.employee=re,ne()}function Y(){S.value&&(B.value.employee=null,B.value.location=null,O.value=!0,P.value=!0,ne()),a("close")}Te(w,re=>{re&&t.employees.length===1&&(B.value.employee=t.employees[0].id,O.value=!1),re&&t.locations.length===1&&(B.value.location=t.locations[0].id,P.value=!1),re&&(t.locations.length===1||t.employees.length===1)&&ne()});let j=h();ue("formWrapper",j);let te=g(()=>o.getters["entities/getService"](t.appointment.serviceId).duration);ue("calendarSlotDuration",te);let ee=h(!0);ue("calendarChangeSideBar",ee);let ie=h(0);ue("calendarServiceDuration",ie);function le(){"id"in t.appointment?N():T()}function X(re){let oe=re?"UTC":o.getters["cabinet/getTimeZone"],ge=m.value+" "+r.value,Ve=null,fe=null;if(re){let Tt=Dt(ge);fe=St(Tt),Ve=Tt}else Ve=ge;return{utcOffset:fe,bookingStart:Ve,timeZone:oe}}function N(){U.value.calendarSlotsLoading=!0;let re=X(!1);Ze()===o.getters["cabinet/getTimeZone"]&&i.general.showClientTimeZone&&(re.utcOffset=St(Dt(m.value+" "+r.value))),Ce.post("/bookings/reassign/"+t.appointment.bookings.filter(oe=>oe.status==="approved"||oe.status==="pending")[0].id,re,Object.assign(De(o),{params:{source:"cabinet-"+R.value}})).then(()=>{U.value.calendarSlotsLoading=!1,a("success",{message:d.value.appointment_rescheduled})}).catch(oe=>{U.value.calendarSlotsLoading=!1,oe.response&&(!("data"in oe.response.data)&&"message"in oe.response.data&&(F.value=!0,V.value=oe.response.data.message,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500)),"data"in oe.response&&"data"in oe.response.data&&"cancelBookingUnavailable"in oe.response.data.data&&(F.value=!0,V.value=t.labels.booking_cancel_exception,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500)),"data"in oe.response&&"data"in oe.response.data&&"timeSlotUnavailable"in oe.response.data.data&&oe.response.data.data.timeSlotUnavailable===!0&&(F.value=!0,V.value=t.labels.time_slot_unavailable,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500)),"data"in oe.response&&"data"in oe.response.data&&"rescheduleBookingUnavailable"in oe.response.data.data&&oe.response.data.data.rescheduleBookingUnavailable===!0&&(F.value=!0,V.value=t.labels.booking_reschedule_exception,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500))),a("error")})}function v(){U.value.calendarSlotsLoading=!0;let re=X(i.general.showClientTimeZone&&o.getters["cabinet/getTimeZone"]===Ze()),oe=JSON.parse(JSON.stringify(t.appointment));oe.bookingStart=re.bookingStart,oe.bookings[0].utcOffset=re.utcOffset,oe.bookings[0].timeZone=re.timeZone,oe.providerId=parseInt(E.value),oe.locationId=parseInt(J.value),Ce.post("/bookings",oe,De(o)).then(ge=>{U.value.calendarSlotsLoading=!1,va(o,ge),a("success",{message:d.value.booking_added_success})}).catch(ge=>{U.value.calendarSlotsLoading=!1,ge.response&&("customerAlreadyBooked"in ge.response.data.data&&ge.response.data.data.customerAlreadyBooked===!0&&(F.value=!0,V.value=t.labels.customer_already_booked_app,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500)),"timeSlotUnavailable"in ge.response.data.data&&ge.response.data.data.timeSlotUnavailable===!0&&(F.value=!0,V.value=t.labels.time_slot_unavailable,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500)),"packageBookingUnavailable"in ge.response.data.data&&ge.response.data.data.packageBookingUnavailable===!0&&(F.value=!0,V.value=t.labels.package_booking_unavailable,setTimeout(function(){Le(j.value,k.value.$el,0,300)},500))),a("error",ge)})}function T(){S.value?L.value.validate(re=>{re?v():setTimeout(()=>{Le(j.value,L.value.$el,0,300)},200)}):v()}let E=h(null),J=h(null),z=h(null);function _e(re,oe){if(z.value=oe,K.value=!1,!t.appointment.bookingStart)return{calendarStartDate:ga(Object.keys(oe))[0],calendarEventSlots:[],calendarEventSlot:null};let ge=t.appointment.bookingStart.split(" ");return{calendarStartDate:ge[0],calendarEventSlots:ge[0]in oe?Object.keys(oe[ge[0]]):[],calendarEventSlot:ge[1].slice(0,5)}}ue("useSlotsCallback",_e),ue("useRange",()=>{if(!t.appointment.bookingStart)return{start:null,end:null};let re=t.appointment.bookingStart.split(" ")[0];return{start:ve(re,"YYYY-MM-DD").startOf("month").subtract(6,"days").format("YYYY-MM-DD"),end:ve(re,"YYYY-MM-DD").endOf("month").add(12,"days").format("YYYY-MM-DD")}}),ue("useSelectedDuration",()=>{});function je(){let re=Object.keys(z.value[m.value]);re.length&&(E.value=r.value&&z.value[m.value][r.value]?z.value[m.value][r.value][0][0]:z.value[m.value][re[0]][0][0],J.value=r.value&&z.value[m.value][r.value]?z.value[m.value][r.value][0][1]:z.value[m.value][re[0]][0][1])}ue("useBusySlots",()=>[]),ue("useSelectedDate",(re,oe)=>(m.value=oe,t.appointment&&t.appointment.bookingStart&&(r.value=t.appointment.bookingStart.split(" ")[1].substring(0,5)),je(),Object.keys(z.value[oe]))),ue("useSelectedTime",(re,oe)=>{r.value=oe.substring(0,5),m.value?je():t.appointment&&(m.value=t.appointment.bookingStart.split(" ")[0],je())}),ue("useDeselectedDate",()=>{m.value="",r.value="",E.value=null,J.value=null});let Jt=_("amFonts"),We=_("amColors"),Gt=g(()=>({"--am-c-csd-text":We.value.colorMainText,"--am-c-csd-bgr":We.value.colorMainBgr,"--am-c-csd-text-op10":x(We.value.colorMainText,.1),"--am-c-scroll-op30":x(We.value.colorPrimary,.3),"--am-c-scroll-op10":x(We.value.colorPrimary,.1),"--am-font-family":Jt.value.fontFamily}));return(re,oe)=>{const ge=fa,Ve=Re;return n(),W(st,{visibility:e(t).visibility,"custom-class":"am-csd am-csd__reschedule",style:ce(e(Gt)),position:"center"},{footer:M(()=>[l("div",yn,[q(he,{category:"secondary",size:e(u)<=360?"small":"default",type:e(t).customizedOptions.cancelBtn.buttonType,disabled:e(K)||e(G),onClick:Y},{default:M(()=>[de(f(s.labels.cancel),1)]),_:1},8,["size","type","disabled"]),q(he,{size:e(u)<=360?"small":"default",type:e(t).customizedOptions.continueBtn.buttonType,disabled:!!(e(K)||e(G)||!e(m)||!e(r)),onClick:le},{default:M(()=>[de(f(s.labels.continue),1)]),_:1},8,["size","type","disabled"])])]),default:M(()=>[l("div",{ref_key:"popupInnerRef",ref:p,class:"am-csd__inner"},[l("div",vn,[l("div",bn,f(s.labels.no_selected_slot_requirements),1),l("div",{class:"am-csd__header-btn",onClick:Y},[q(Ae,{icon:"close"})])]),l("div",{ref_key:"rescheduleRef",ref:j,class:"am-csd__content"},[e(F)?(n(),W(Ee,{key:0,ref_key:"alertContainer",ref:k,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:b,onTriggerClose:b},{title:M(()=>[hn,de(" "+f(e(V)),1)]),_:1},512)):C("",!0),e(S)?(n(),W(Ve,{key:1,ref_key:"packageFormRef",ref:L,class:"am-csd__filter-wrapper",rules:e(A),model:e(B),"label-position":"top"},{default:M(()=>[l("div",{class:H(["am-csd__filter am-csd__filter-employee",e(I)])},[e(t).employees.length&&e(O)&&e(t).customizedOptions.employee.visibility?(n(),W(ge,{key:0,class:H([{"am-csd__filter-full":!(e(t).locations.length&&e(P)&&e(t).customizedOptions.location.visibility)},e(I)]),label:`${e(d).package_appointment_employee}:`,prop:"employee"},{default:M(()=>[q(Xe,{modelValue:e(B).employee,"onUpdate:modelValue":oe[0]||(oe[0]=fe=>e(B).employee=fe),clearable:"",filterable:e(t).customizedOptions.employee.filterable,placeholder:`${e(d).package_select_employee}...`,"fit-input-width":!0,"popper-class":"am-csd__filter-employees",disabled:e(K),onChange:ne},{default:M(()=>[(n(!0),c(ae,null,pe(e(t).employees,fe=>(n(),W(Qe,{key:fe.id,value:fe.id,label:`${fe.firstName} ${fe.lastName}`},{default:M(()=>[q(cs,{identifier:fe.id,label:`${fe.firstName} ${fe.lastName}`,price:0,"image-thumb":fe.pictureThumbPath,description:fe.description,"dialog-title":e(d).employee_information_package,"dialog-button-text":e(d).select_this_employee_package,badge:fe.badge,onClick:se},null,8,["identifier","label","image-thumb","description","dialog-title","dialog-button-text","badge"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):C("",!0),e(t).locations.length&&e(P)&&e(t).customizedOptions.location.visibility?(n(),W(ge,{key:1,class:H([{"am-csd__filter-full":!(e(t).employees.length&&e(O)&&e(t).customizedOptions.employee.visibility)},e(I)]),label:`${e(d).package_appointment_location}:`,prop:"location"},{default:M(()=>[q(Xe,{modelValue:e(B).location,"onUpdate:modelValue":oe[1]||(oe[1]=fe=>e(B).location=fe),clearable:"",filterable:e(t).customizedOptions.location.filterable,placeholder:`${e(d).package_select_location}...`,"fit-input-width":!0,disabled:e(K),onChange:ne},{default:M(()=>[(n(!0),c(ae,null,pe(e(t).locations,fe=>(n(),W(Qe,{key:fe.id,value:fe.id,label:fe.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):C("",!0)],2)]),_:1},8,["rules","model"])):C("",!0),e(t).appointment!==null?(n(),W(_a,{key:2,id:0,ref_key:"calendarRef",ref:U,"preselect-slot":!1,"load-counter":e(Q),"end-time":e(t).customizedOptions.endTimeVisibility.visibility,"time-zone":e(t).customizedOptions.timeZoneVisibility.visibility,"label-slots-selected":s.labels.date_time_slots_selected,"fetched-slots":null,"service-id":0,date:e(t).appointment&&e(t).appointment.bookingStart?e(t).appointment.bookingStart.split(" ")[0]:"","slots-params":e(Z)},null,8,["load-counter","end-time","time-zone","label-slots-selected","date","slots-params"])):C("",!0)],512)],512)]),_:1},8,["visibility","style"])}}});const xn={class:"am-csd__inner"},Cn={class:"am-csd__header"},Tn={class:"am-csd__header-text"},$n={class:"am-csd__content"},Pn={class:"am-ccpss__heading"},Ln={class:"am-csd__footer"},wn={name:"CancelBooking"},kt=Object.assign(wn,{props:{visibility:{type:Boolean,required:!0},title:{type:String,default:""},description:{type:String,default:""},closeBtnText:{type:String,required:!0},confirmBtnText:{type:String,required:!0},loading:{type:Boolean,default:!1},count:{type:Number,default:1},customizedOptions:{type:Object,required:!0}},emits:["close","confirm"],setup(s,{emit:a}){const t=s;let o=_("containerWidth"),i=_("amFonts"),d=_("amColors"),m=g(()=>({"--am-c-csd-text":d.value.colorMainText,"--am-c-csd-bgr":d.value.colorMainBgr,"--am-font-family":i.value.fontFamily}));return(r,p)=>{const u=ot,y=nt;return n(),W(st,{visibility:e(t).visibility,"custom-class":"am-csd am-csd__cancel",style:ce(e(m)),position:"center"},{footer:M(()=>[l("div",Ln,[q(he,{category:"secondary",size:e(o)<=360?"small":"default",type:s.customizedOptions.cancelBtn.buttonType,disabled:s.loading,onClick:p[1]||(p[1]=()=>{a("close")})},{default:M(()=>[de(f(e(t).closeBtnText),1)]),_:1},8,["size","type","disabled"]),q(he,{category:"danger",size:e(o)<=360?"small":"default",type:s.customizedOptions.confirmBtn.buttonType,disabled:s.loading,onClick:p[2]||(p[2]=()=>{a("confirm")})},{default:M(()=>[de(f(e(t).confirmBtnText),1)]),_:1},8,["size","type","disabled"])])]),default:M(()=>[l("div",xn,[s.loading?(n(),W(y,{key:1,animated:"",class:"am-ccpss"},{template:M(()=>[l("div",Pn,[q(u,{variant:"rect"})]),(n(!0),c(ae,null,pe(new Array(e(t).count),D=>(n(),c("div",{key:D,class:"am-ccpss__text"},[q(u,{variant:"rect"})]))),128))]),_:1})):(n(),c(ae,{key:0},[l("div",Cn,[l("div",Tn,f(e(t).title),1),l("div",{class:"am-csd__header-btn",onClick:p[0]||(p[0]=()=>{a("close")})},[q(Ae,{icon:"close"})])]),l("div",$n,[l("p",null,f(e(t).description),1)])],64))])]),_:1},8,["visibility","style"])}}});const Sn={name:"CabinetAppointmentsList"},Ht=Object.assign(Sn,{props:{groupedAppointments:{type:Object,default:null},responsiveClass:{type:String,default:""},pageWidth:{type:Number},isPackageBooking:{type:Boolean,default:!1},stepKey:{type:String,required:!0}},emits:["booked","canceled"],setup(s,{emit:a}){const t=s;let o=xe();const i=_("settings");let d=_("amLabels"),m=_("cabinetType"),r=h(null),p=h(null),u=h(null);function y(B=null){p.value=null,a("booked",B)}let D=h(!1);function $(){D.value=!0,Ce.post("/bookings/cancel/"+r.value.id,{type:"appointment"},Object.assign(De(o),{params:{source:"cabinet-"+m.value}})).then(()=>{r.value=null,a("canceled",{message:d.value.appointment_canceled})}).catch(B=>{console.log(B)}).finally(()=>{D.value=!1})}function w(B){let O=jt(o,{price:B.bookings[0].price,persons:B.bookings[0].persons,aggregatedPrice:B.bookings[0].aggregatedPrice,extras:B.bookings[0].extras,tax:B.bookings[0].tax,coupon:B.bookings[0].coupon},!1);return O.total-O.discount+O.tax}function I(B){let O=[],P=0,S=B;S.bookings.forEach(A=>{A.extras.forEach(Z=>{O.push({id:Z.extraId,quantity:Z.quantity})}),"duration"in A&&A.duration&&A.duration>P&&(A.status==="approved"||A.status==="pending")&&(P=A.duration)});let L={serviceId:S.serviceId,serviceDuration:P||null,locationId:S.locationId,providerIds:[S.providerId],extras:JSON.stringify(O),excludeAppointmentId:S.isGroup?null:S.id,group:1,timeZone:o.getters["cabinet/getTimeZone"],page:"cabinet"};p.value=B,u.value=L}function F(B){return o.getters["entities/getEmployee"](B)}let k=_("amCustomize");const V=_("labels"),b=_("localLanguage");let U=g(()=>i.general.usedLanguages.includes(b.value));function G(B){let O=ke(be({},V)),P=k.value[B].translations;return P&&Object.keys(P).forEach(S=>{P[S][b.value]&&U.value?O[S]=P[S][b.value]:P[S].default&&(O[S]=P[S].default)}),O}function R(B){return k.value[B].options}let Q=_("amColors"),K=g(()=>({"--am-c-capa-bgr":Q.value.colorMainBgr,"--am-c-capa-text":Q.value.colorMainText,"--am-c-capa-text-op70":x(Q.value.colorMainText,.7),"--am-c-capa-text-op25":x(Q.value.colorMainText,.25),"--am-c-capa-primary":Q.value.colorPrimary}));return(B,O)=>(n(),c(ae,null,[l("div",{class:H(["am-capa__wrapper",[{"am-no-border":e(t).groupedAppointments&&Object.keys(e(t).groupedAppointments).length===1},e(t).responsiveClass]]),style:ce(e(K))},[(n(!0),c(ae,null,pe(e(t).groupedAppointments,(P,S)=>(n(),c("div",{key:S,class:"am-capa"},[l("div",{class:H(["am-capa__date",[{"am-today":e(Me)(S)===e(Me)(e(Pa)().format("YYYY-MM-DD"))},{"am-no-flag":e(t).groupedAppointments&&Object.keys(e(t).groupedAppointments).length===1},e(t).responsiveClass]])},f(e(Me)(S)),3),(n(!0),c(ae,null,pe(P.appointments,(L,A)=>(n(),c(ae,{key:A},[e(o).getters["entities/getService"](L.serviceId)?(n(),W(Zt,{key:0,start:e(et)(L.bookingStart.split(" ")[1].slice(0,5)),name:e(o).getters["entities/getService"](L.serviceId).name,employee:F(L.provider.id),price:w(L),duration:e(Fl)(e(o),L),periods:[],extras:e(Ml)(L.bookings,e(o).getters["entities/getService"](L.serviceId)),tickets:[],"custom-fields":e(Wt)(L.bookings),location:L.locationId?e(o).getters["entities/getLocation"](L.locationId):null,"google-meet-link":L.googleMeetUrl,"zoom-link":L.zoomMeeting?L.zoomMeeting.joinUrl:"","lesson-space-link":L.lessonSpace,bookable:L.service,reservation:L,booking:L.bookings[0],"is-package-booking":e(t).isPackageBooking,"responsive-class":e(t).responsiveClass,"parent-width":e(t).pageWidth,"customized-options":R(e(t).stepKey),onCancelBooking:O[0]||(O[0]=Z=>{me(r)?r.value=Z:r=Z}),onRescheduling:I},null,8,["start","name","employee","price","duration","extras","custom-fields","location","google-meet-link","zoom-link","lesson-space-link","bookable","reservation","booking","is-package-booking","responsive-class","parent-width","customized-options"])):C("",!0)],64))),128))]))),128))],6),q(kt,{visibility:e(r)!==null,title:G("cancelAppointment").cancel_appointment,description:G("cancelAppointment").confirm_cancel_appointment,"close-btn-text":G("cancelAppointment").close,"confirm-btn-text":G("cancelAppointment").confirm,"customized-options":R("cancelAppointment"),loading:e(D),onClose:O[1]||(O[1]=P=>me(r)?r.value=null:r=null),onConfirm:$},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"]),q(Rt,{visibility:e(p)!==null,appointment:e(p),"slots-params":e(u),labels:G("rescheduleAppointment"),"customized-options":R("rescheduleAppointment"),onClose:O[2]||(O[2]=P=>me(p)?p.value=null:p=null),onSuccess:y,onError:O[3]||(O[3]=()=>{})},null,8,["visibility","appointment","slots-params","labels","customized-options"])],64))}});const Dn={key:0,class:"el-skeleton-item-wrapper-title"},Fn={name:"AuthSkeleton"},xt=Object.assign(Fn,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(s){const a=s;return(t,o)=>{const i=ot,d=nt;return n(),W(d,{animated:"",class:H(["am-asi-el-skeleton",[{"am-asi":e(a).mainClass}]])},{template:M(()=>[e(a).centerFirst?(n(),c("div",Dn,[q(i,{variant:"rect"})])):C("",!0),(n(!0),c(ae,null,pe(new Array(e(a).count),m=>(n(),c("div",{key:m,class:"el-skeleton-item-wrapper"},[q(i,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});const Mn={class:"am-ces__img-holder"},On={width:"240",height:"195",viewBox:"0 0 240 195",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zn={"clip-path":"url(#clip0_1811_81872)"},Bn=["fill"],In=["fill"],En=["fill"],An=["fill"],jn=["fill"],Nn=["fill"],Vn=["fill"],Yn={opacity:"0.5"},Un=["fill"],Wn=["fill"],qn=["fill"],Zn=["fill"],Rn=["fill"],Hn=["stroke"],Jn={opacity:"0.5"},Gn=["stroke"],Qn=ba('<circle cx="109.964" cy="55.167" r="34.0723" transform="rotate(-45 109.964 55.167)" fill="url(#paint0_linear_1811_81872)" fill-opacity="0.7"></circle><mask id="mask0_1811_81872" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="75" y="21" width="69" height="69"><circle cx="109.714" cy="55.167" r="34.0723" transform="rotate(-45 109.714 55.167)" fill="url(#paint1_linear_1811_81872)"></circle></mask><g mask="url(#mask0_1811_81872)"><rect x="111.095" y="4.51782" width="10.0968" height="107.245" transform="rotate(30 111.095 4.51782)" fill="url(#paint2_linear_1811_81872)" fill-opacity="0.6"></rect><rect x="125.427" y="2.67041" width="3.39099" height="107.245" transform="rotate(30 125.427 2.67041)" fill="url(#paint3_linear_1811_81872)" fill-opacity="0.6"></rect></g>',3),Xn={id:"paint0_linear_1811_81872",x1:"144.037",y1:"91.6409",x2:"83.5731",y2:"31.1781",gradientUnits:"userSpaceOnUse"},Kn=["stop-color"],ei=["stop-color"],ti={id:"paint1_linear_1811_81872",x1:"143.786",y1:"91.6409",x2:"83.3226",y2:"31.1781",gradientUnits:"userSpaceOnUse"},ai=["stop-color"],si=["stop-color"],li={id:"paint2_linear_1811_81872",x1:"116.144",y1:"4.51782",x2:"116.144",y2:"111.763",gradientUnits:"userSpaceOnUse"},oi=["stop-color"],ni=["stop-color"],ii={id:"paint3_linear_1811_81872",x1:"127.122",y1:"2.67041",x2:"127.122",y2:"109.915",gradientUnits:"userSpaceOnUse"},ri=["stop-color"],ci=["stop-color"],ui={id:"clip0_1811_81872"},di=["fill"],pi={class:"am-ces__content"},mi={class:"am-ces__heading"},_i={class:"am-ces__text"},Ct={props:{heading:{type:String,default:""},text:{type:String,default:""}},setup(s){const a=s;let t=_("amColors"),o=g(()=>({"--am-c-ces-text":t.value.colorMainText,"--am-c-ces-text-op70":x(t.value.colorMainText,.7)}));return(i,d)=>(n(),c("div",{class:"am-ces",style:ce(e(o))},[l("div",Mn,[(n(),c("svg",On,[l("g",zn,[l("path",{d:"M10.0934 144.996C11.624 145.051 13.0595 145.879 14.0693 147.034C15.0791 148.184 15.6995 149.633 16.0934 151.114C16.8587 153.976 16.3878 157.359 15.5727 160.207C12.4708 159.097 10.5599 155.792 9.69496 154.053C8.32741 151.304 7.5259 145.513 10.0889 144.996",fill:e(t).colorMainText},null,8,Bn),l("path",{d:"M20.033 163.676C19.0549 162.272 19.0322 160.32 19.8066 158.79C20.5809 157.264 22.0662 156.163 23.7009 155.661C24.4571 155.43 25.3356 155.33 25.9922 155.769C26.6081 156.181 26.8752 156.987 26.7937 157.721C26.7122 158.455 26.3409 159.129 25.9017 159.723C24.3937 161.765 22.5598 163.463 20.033 163.671",fill:e(t).colorMainText},null,8,In),l("path",{d:"M20.3771 173.244C20.3771 173.244 20.3137 173.036 20.2367 172.651C20.1552 172.225 20.0465 171.677 19.9198 171.021C19.6752 169.649 19.2858 167.697 19.5801 165.541C19.8609 163.395 20.7167 161.557 21.6133 160.461C22.0526 159.908 22.4782 159.514 22.7907 159.274C22.9401 159.148 23.076 159.071 23.1575 159.007C23.2435 158.948 23.2933 158.921 23.2979 158.93C23.3296 158.966 22.5733 159.437 21.7356 160.556C20.8888 161.656 20.0737 163.458 19.793 165.573C19.5032 167.688 19.8609 169.621 20.0692 170.998C20.1779 171.691 20.2684 172.252 20.3228 172.642C20.3726 173.031 20.3952 173.249 20.3771 173.249V173.244Z",fill:e(t).colorMainText},null,8,En),l("path",{d:"M11.0894 149.357C11.0894 149.357 11.1392 149.434 11.2161 149.593C11.2977 149.769 11.4063 150 11.5377 150.281C11.8094 150.883 12.1988 151.757 12.6652 152.839C13.598 155.009 14.8478 158.024 16.152 161.38C17.4561 164.74 18.5656 167.81 19.3354 170.038C19.7203 171.152 20.0282 172.058 20.232 172.687C20.3271 172.986 20.4041 173.226 20.4629 173.412C20.5128 173.579 20.5354 173.665 20.5309 173.67C20.5263 173.674 20.4856 173.588 20.4222 173.425C20.3543 173.239 20.2637 173.004 20.155 172.714C19.9195 172.071 19.5935 171.179 19.195 170.088C18.3845 167.869 17.2524 164.812 15.9528 161.452C14.6486 158.097 13.426 155.076 12.5294 152.894C12.0901 151.821 11.7278 150.942 11.4652 150.308C11.3475 150.018 11.2569 149.783 11.1844 149.602C11.1211 149.439 11.0939 149.353 11.0984 149.348L11.0894 149.357Z",fill:e(t).colorMainText},null,8,An),l("path",{d:"M16.6956 166.913C14.8662 163.802 11.4564 161.683 7.85639 161.421C6.94167 161.353 5.83676 161.507 5.42922 162.331C5.02167 163.155 5.56507 164.128 6.18997 164.808C8.78922 167.62 13.1817 168.602 16.7273 167.162",fill:e(t).colorMainText},null,8,jn),l("path",{d:"M9.25113 163.875C9.25113 163.875 9.4549 163.87 9.82622 163.897C10.0119 163.911 10.2383 163.925 10.4964 163.974C10.7545 164.024 11.0534 164.051 11.3749 164.137C11.6964 164.214 12.0541 164.296 12.4209 164.427C12.7968 164.536 13.1817 164.699 13.5847 164.871C14.3817 165.233 15.233 165.709 16.0391 166.325C16.8406 166.95 17.5153 167.647 18.0677 168.331C18.3304 168.679 18.584 169.014 18.7832 169.354C19.0006 169.68 19.1636 170.006 19.313 170.3C19.476 170.59 19.5711 170.876 19.6798 171.116C19.7885 171.356 19.8519 171.573 19.9062 171.75C20.0149 172.103 20.0692 172.297 20.0557 172.302C20.0104 172.32 19.7885 171.528 19.1772 170.368C19.0187 170.083 18.8511 169.766 18.6292 169.449C18.43 169.119 18.1764 168.797 17.9092 168.457C17.3613 167.792 16.6911 167.113 15.9032 166.497C15.1108 165.89 14.2821 165.419 13.4987 165.052C13.1047 164.88 12.7243 164.713 12.3575 164.599C11.9998 164.463 11.6511 164.377 11.3341 164.287C10.0617 163.965 9.24207 163.92 9.2466 163.875H9.25113Z",fill:e(t).colorMainText},null,8,Nn),l("path",{d:"M91.9065 80.3956L75.8945 162.72L73.7979 173.497L180.693 172.972C185.488 172.95 189.74 168.688 191.285 162.362L210.24 84.6386C211.413 79.8341 208.841 74.8394 205.2 74.8394L97.0099 74.9526C94.619 74.9526 92.5314 77.185 91.9065 80.3956Z",fill:e(t).colorMainBgr},null,8,Vn),l("g",Yn,[l("path",{d:"M91.9065 80.3951L75.8945 162.72L73.7979 173.497L180.693 172.972C185.488 172.949 189.74 168.688 191.285 162.362L210.24 84.6381C211.413 79.8336 208.841 74.8389 205.2 74.8389L97.0099 74.9521C94.619 74.9521 92.5314 77.1845 91.9065 80.3951Z",fill:e(t).colorMainText},null,8,Un)]),l("path",{d:"M170.441 157.146L159.125 65.9412C158.663 62.2053 155.683 59.4159 152.169 59.4295L127.35 59.511C125.511 59.5155 123.75 60.2989 122.445 61.6846L110.663 74.2099L41.6378 74.5721C37.422 74.5948 34.1797 78.5842 34.7367 83.0718L45.2469 167.366C45.7133 171.097 48.6839 173.882 52.1933 173.873L172.488 173.638C185.887 173.914 187.164 169.961 187.164 169.961C171.808 173.362 170.441 157.159 170.441 157.15V157.146Z",fill:e(t).colorMainText},null,8,Wn),l("rect",{x:"130.984",y:"80.0801",width:"5.5062",height:"25.0888",rx:"2.7531",transform:"rotate(-45 130.984 80.0801)",fill:e(t).colorMainBgr},null,8,qn),l("path",{d:"M147.845 104.347C142.496 98.9978 142.496 90.3249 147.845 84.9756C148.737 84.084 150.182 84.084 151.074 84.9756L178.063 111.965C181.183 115.085 181.183 120.144 178.063 123.265C174.942 126.385 169.883 126.385 166.763 123.265L147.845 104.347Z",fill:e(t).colorMainBgr},null,8,Zn),l("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M151.42 91.7928C151.138 91.5115 150.682 91.5115 150.401 91.7928C150.12 92.0741 150.12 92.5303 150.401 92.8116L161.801 104.212C162.083 104.493 162.539 104.493 162.82 104.212C163.101 103.931 163.101 103.474 162.82 103.193L151.42 91.7928ZM165.702 105.806C165.42 105.524 164.964 105.524 164.683 105.806C164.402 106.087 164.402 106.543 164.683 106.825L165.11 107.252C165.391 107.533 165.847 107.533 166.129 107.252C166.41 106.97 166.41 106.514 166.129 106.233L165.702 105.806Z",fill:e(t).colorMainText},null,8,Rn),l("circle",{cx:"109.964",cy:"55.167",r:"37.6805",transform:"rotate(-45 109.964 55.167)",stroke:e(t).colorMainText,"stroke-width":"8"},null,8,Hn),l("g",Jn,[l("circle",{cx:"109.964",cy:"55.167",r:"37.6805",transform:"rotate(-45 109.964 55.167)",stroke:e(t).colorMainBgr,"stroke-width":"8"},null,8,Gn)]),Qn]),l("defs",null,[l("linearGradient",Xn,[l("stop",{"stop-color":e(t).colorMainBgr},null,8,Kn),l("stop",{offset:"1","stop-color":e(t).colorMainBgr},null,8,ei)]),l("linearGradient",ti,[l("stop",{"stop-color":e(t).colorMainBgr},null,8,ai),l("stop",{offset:"1","stop-color":e(t).colorMainBgr},null,8,si)]),l("linearGradient",li,[l("stop",{"stop-color":e(t).colorMainText},null,8,oi),l("stop",{offset:"1","stop-color":e(t).colorMainText,"stop-opacity":"0"},null,8,ni)]),l("linearGradient",ii,[l("stop",{"stop-color":e(t).colorMainText},null,8,ri),l("stop",{offset:"1","stop-color":e(t).colorMainText,"stop-opacity":"0"},null,8,ci)]),l("clipPath",ui,[l("rect",{width:"240",height:"194.717",fill:e(t).colorMainText},null,8,di)])])]))]),l("div",pi,[l("div",mi,f(e(a).heading),1),l("div",_i,f(e(a).text),1)])],4))}};const gi=l("span",{class:"am-icon-checkmark-circle-full"},null,-1),fi={name:"CabinetAppointments",key:"appointments"},vi=Object.assign(fi,{props:{loadBookingsCounter:{type:Number,default:0},appointments:{type:Object,default:null}},setup(s){const a=s;let t=xe();const o=_("settings");let i=_("amCustomize");const d=_("labels"),m=_("localLanguage");let r=g(()=>o.general.usedLanguages.includes(m.value)),p=g(()=>{let O=ke(be({},d)),P=i.value.appointments.translations;return P&&Object.keys(P).forEach(S=>{P[S][m.value]&&r.value?O[S]=P[S][m.value]:P[S].default&&(O[S]=P[S].default)}),O});ue("amLabels",p);let u=h(null),y=h(0),D=_("sidebarCollapsed");window.addEventListener("resize",$);function $(){u.value&&(y.value=u.value.offsetWidth)}Te(D,O=>{O?setTimeout(()=>{w()},1500):setTimeout(()=>{w()},500)});function w(){y.value=u.value.offsetWidth}Fe(()=>{He(()=>{y.value=u.value.offsetWidth})});let I=g(()=>Pe(y.value)),F=h(!1),k=h(null),V=h(!1),b=h("success"),U=h("");function G(){V.value=!1,t.commit("cabinet/setPaymentLinkError",{value:!1,type:"appointment"})}let R=_("cabinetType");t.commit("cabinetFilters/setDates",vt(R.value));let Q=g(()=>t.getters["cabinet/getAppointmentsLoading"]),K=h(null);function B(O=null){t.commit("cabinet/setAppointmentsLoading",!0);let P=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getAppointmentsFilters"])),S=t.getters["cabinet/getTimeZone"];P.dates=P.dates.map(L=>ve(L).format("YYYY-MM-DD")),P.timeZone=S,P.source="cabinet-"+R.value,Ce.get("/appointments",bt(Object.assign(De(t),{params:P}))).then(L=>{K.value=Ut(L.data.data.appointments,S);let A=!(P.services.length||P.providers.length||P.locations.length);if(F.value=(!K.value||Object.values(K.value).length===0)&&A,K.value&&Object.values(K.value).length>0&&A){let Z=Object.values(K.value).map(Y=>Y.appointments.map(j=>j.serviceId)).flat().filter((Y,j,te)=>te.indexOf(Y)===j);t.dispatch("cabinetFilters/injectServiceOptions",Z);let ne=Object.values(K.value).map(Y=>Y.appointments.map(j=>j.providerId)).flat().filter((Y,j,te)=>te.indexOf(Y)===j);t.dispatch("cabinetFilters/injectProviderOptions",ne);let se=Object.values(K.value).map(Y=>Y.appointments.map(j=>j.locationId)).flat().filter((Y,j,te)=>te.indexOf(Y)===j);t.dispatch("cabinetFilters/injectLocationOptions",se)}}).catch(L=>{console.log(L)}).finally(()=>{t.commit("cabinet/setAppointmentsLoading",!1),O&&"message"in O&&(V.value=!0,U.value=O.message,u.value&&k.value&&setTimeout(function(){Le(u.value,k.value.$el,0,300)},500))})}return Te(()=>a.loadBookingsCounter,()=>{B()}),Fe(()=>{B()}),(O,P)=>(n(),c("div",{ref_key:"pageContainer",ref:u,class:"am-cap"},[e(V)?(n(),W(Ee,{key:0,ref_key:"alertContainer",ref:k,type:e(b),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:G,onTriggerClose:G},{title:M(()=>[gi,de(" "+f(e(U)),1)]),_:1},8,["type"])):C("",!0),q(yt,{"step-key":"appointments","responsive-class":e(I),empty:e(F),onChangeFilters:B},null,8,["responsive-class","empty"]),e(Q)?(n(),W(xt,{key:2})):(n(),c(ae,{key:1},[e(K)&&Object.keys(e(K)).length>0?(n(),W(Ht,{key:0,"grouped-appointments":e(K),"page-width":e(y),"responsive-class":e(I),"step-key":"appointments",onCanceled:B,onBooked:B},null,8,["grouped-appointments","page-width","responsive-class"])):(n(),W(Ct,{key:1,heading:e(p).no_app_found,text:e(p).have_no_app},null,8,["heading","text"]))],64))],512))}});const bi=l("span",{class:"am-icon-checkmark-circle-full"},null,-1),hi={name:"CabinetEvents",key:"events"},yi=Object.assign(hi,{props:{loadBookingsCounter:{type:Number,default:0}},setup(s){const a=s;let t=xe(),o=h(null),i=h(0),d=_("sidebarCollapsed");window.addEventListener("resize",m);function m(){o.value&&(i.value=o.value.offsetWidth)}Te(d,Y=>{Y?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){i.value=o.value.offsetWidth}Fe(()=>{He(()=>{i.value=o.value.offsetWidth})});let p=g(()=>Pe(i.value));const u=_("settings");let y=_("amCustomize");const D=_("labels"),$=_("localLanguage");let w=g(()=>u.general.usedLanguages.includes($.value)),I=g(()=>{let Y=ke(be({},D)),j=y.value.events.translations;return j&&Object.keys(j).forEach(te=>{j[te][$.value]&&w.value?Y[te]=j[te][$.value]:j[te].default&&(Y[te]=j[te].default)}),Y});ue("amLabels",I);let F=h(null),k=h(!1),V=h("success"),b=h("");function U(){k.value=!1,t.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}function G(Y){let j=ke(be({},D)),te=y.value[Y].translations;return te&&Object.keys(te).forEach(ee=>{te[ee][$.value]&&w.value?j[ee]=te[ee][$.value]:te[ee].default&&(j[ee]=te[ee].default)}),j}function R(Y){return y.value[Y].options}let Q=_("cabinetType");t.commit("cabinetFilters/setDates",vt(Q.value));let K=g(()=>t.getters["cabinet/getEventsLoading"]),B=h(!1),O=h(null),P=h(null);function S(){O.value=null,t.commit("cabinet/setEventsLoading",!0);let Y=t.getters["cabinet/getTimeZone"],j=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getEventsFilters"]));j.dates=j.dates.map(te=>ve(te).format("YYYY-MM-DD")),j.timeZone=Y,j.source="cabinet-"+Q.value,j.id=j.events,Ce.get("/events",bt(Object.assign(De(t),{params:j}))).then(te=>{t.commit("eventEntities/setEvents",te.data.data.events),P.value=us(te.data.data.events,t.getters["cabinet/getTimeZone"],t);let ee=!(j.events.length||j.providers.length||j.locations.length);if(B.value=(!P.value||Object.values(P.value).length===0)&&ee,P.value&&Object.values(P.value).length>0&&ee){t.dispatch("cabinetFilters/injectEventsOptions");let ie=Object.values(P.value).map(X=>X.events.map(N=>N.organizerId)).flat().concat(Object.values(P.value).map(X=>X.events.map(N=>N.providers).flat().map(N=>N.id)).flat()).filter((X,N,v)=>v.indexOf(X)===N);t.dispatch("cabinetFilters/injectProviderOptions",ie);let le=Object.values(P.value).map(X=>X.events.map(N=>N.locationId)).flat().filter((X,N,v)=>v.indexOf(X)===N);t.dispatch("cabinetFilters/injectLocationOptions",le)}}).catch(te=>{console.log(te)}).finally(()=>{t.commit("cabinet/setEventsLoading",!1)})}let L=h(!1);function A(){L.value=!0,Ce.post("/bookings/cancel/"+O.value.id,{type:"event",source:"cabinet-"+Q.value},Object.assign(De(t),{params:{source:"cabinet-"+Q.value}})).then(()=>{O.value=null,S(),k.value=!0,b.value=I.value.event_canceled,o.value&&F.value&&setTimeout(function(){Le(o.value,F.value.$el,0,300)},500)}).catch(Y=>{!("data"in Y.response.data)&&"message"in Y.response.data&&(k.value=!0,b.value=Y.response.data.message,o.value&&F.value&&setTimeout(function(){Le(o.value,F.value.$el,0,300)},500))}).finally(()=>{L.value=!1})}Te(()=>a.loadBookingsCounter,()=>{S()}),Fe(()=>{S()});function Z(Y){let j=[],te=t.getters["entities/getEmployees"];if(Y.organizerId&&te.find(ee=>ee.id===Y.organizerId)){let ee=Lt(be({},te.find(ie=>ie.id===Y.organizerId)),{rank:"organizer"});if(!Y.providers.length)return ee;j.push(ee)}return Y.providers.length&&Y.providers.forEach(ee=>{ee.id!==Y.organizerId&&te.find(ie=>ie.id===ee.id)&&j.push(te.find(ie=>ie.id===ee.id))}),j}let ne=_("amColors"),se=g(()=>({"--am-c-cape-bgr":ne.value.colorMainBgr,"--am-c-cape-text":ne.value.colorMainText,"--am-c-cape-text-op70":x(ne.value.colorMainText,.7),"--am-c-cape-text-op25":x(ne.value.colorMainText,.25),"--am-c-cape-primary":ne.value.colorPrimary}));return(Y,j)=>(n(),c("div",{ref_key:"pageContainer",ref:o,class:"am-cap",style:ce(e(se))},[e(k)?(n(),W(Ee,{key:0,ref_key:"alertContainer",ref:F,type:e(V),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:U,onTriggerClose:U},{title:M(()=>[bi,de(" "+f(e(b)),1)]),_:1},8,["type"])):C("",!0),q(yt,{"step-key":"events",empty:e(B),"responsive-class":e(p),onChangeFilters:S},null,8,["empty","responsive-class"]),e(K)?(n(),W(xt,{key:2})):(n(),c(ae,{key:1},[e(P)&&Object.keys(e(P)).length>0?(n(),c("div",{key:0,class:H(["am-cape__wrapper",[{"am-no-border":e(P)&&Object.keys(e(P)).length===1},e(p)]])},[(n(!0),c(ae,null,pe(e(P),(te,ee)=>(n(),c("div",{key:ee,class:"am-cape"},[l("div",{class:H(["am-cape__date",[{"am-today":e(Me)(ee)===e(Me)(e(ve)().format("YYYY-MM-DD"))},{"am-no-flag":e(P)&&Object.keys(e(P)).length===1},e(p)]])},f(e(Me)(ee)),3),(n(!0),c(ae,null,pe(te.events,(ie,le)=>(n(),W(Zt,{key:le,start:e(et)(ie.periods[0].periodStart.split(" ")[1].slice(0,5)),name:ie.name,employee:Z(ie),price:e(Vt)(ie),duration:null,periods:(Y.periods=e(ds)(ie.periods))?Y.periods:[],extras:[],tickets:e(ps)(ie),"custom-fields":e(Wt)(ie.bookings),location:e(ms)(e(t),ie),"google-meet-link":ie.periods.length===1&&ie.periods[0].googleMeetUrl?ie.periods[0].googleMeetUrl:"","zoom-link":ie.periods.length===1&&ie.periods[0].zoomMeeting?ie.periods[0].zoomMeeting.joinUrl:"","lesson-space-link":ie.periods.length===1&&ie.periods[0].lessonSpace?ie.periods[0].lessonSpace:"",bookable:ie,reservation:ie,booking:ie.bookings[0],"responsive-class":e(p),"parent-width":e(i),"customized-options":R("events"),onCancelBooking:j[0]||(j[0]=X=>{me(O)?O.value=X:O=X})},null,8,["start","name","employee","price","periods","tickets","custom-fields","location","google-meet-link","zoom-link","lesson-space-link","bookable","reservation","booking","responsive-class","parent-width","customized-options"]))),128))]))),128))],2)):C("",!0),e(P)===null||Object.keys(e(P)).length===0?(n(),W(Ct,{key:1,heading:e(I).no_evt_found,text:e(I).have_no_evt},null,8,["heading","text"])):C("",!0),q(kt,{visibility:e(O)!==null,title:G("cancelEvent").cancel_event,description:G("cancelEvent").confirm_cancel_event,"close-btn-text":G("cancelEvent").close,"confirm-btn-text":G("cancelEvent").confirm,"customized-options":R("cancelEvent"),loading:e(L),onClose:j[1]||(j[1]=te=>me(O)?O.value=null:O=null),onConfirm:A},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])],64))],4))}});const ki={class:"am-sc__top-left"},xi={class:"am-sc__name"},Ci={key:0,class:"am-sc__date"},Ti={key:1,class:"am-sc__date"},$i=["onClick"],Pi={class:"am-sc__capacity"},Li=l("div",{class:"am-sc__btn"},[l("span",{class:"am-icon-arrow-right"})],-1),wi={key:0,class:"am-sc__bottom"},Si={class:"am-sc__expiration"},Di=l("span",{class:"am-icon-triangle-info"},null,-1),Fi={name:"CabinetPackagesList"},Mi=Object.assign(Fi,{props:{packages:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""}},emits:["click"],setup(s,{emit:a}){const t=s;function o(k){return ve(k,"YYYY-MM-DD").diff(ve(),"days")}function i(k){a("click",k)}function d(k,V,b){let U=0;return Object.keys(k).forEach(G=>{(V===null||parseInt(V)===parseInt(G))&&(U+=k[G].purchaseData[b])}),U}function m(k){return k===1?w.value.appointment_booked:w.value.appointments_booked}function r(k){let V=k.packageData.sharedCapacity?k.packageData.sharedCount:d(k.services,null,"count"),b=k.packageData.sharedCapacity?k.packageData.sharedTotal:d(k.services,null,"total");return`${b-V}/${b} ${m(b-V)}`}const p=_("settings");let u=_("amCustomize");const y=_("labels"),D=_("localLanguage");let $=g(()=>p.general.usedLanguages.includes(D.value)),w=g(()=>{let k=ke(be({},y)),V=u.value.packagesList.translations;return V&&Object.keys(V).forEach(b=>{V[b][D.value]&&$.value?k[b]=V[b][D.value]:V[b].default&&(k[b]=V[b].default)}),k}),I=_("amColors"),F=g(()=>({"--am-c-sc-bgr":I.value.colorMainBgr,"--am-c-sc-bgr-op15":x(I.value.colorMainText,.15),"--am-c-sc-text":I.value.colorMainText,"--am-c-sc-text-op80":x(I.value.colorMainText,.8),"--am-c-sc-text-op60":x(I.value.colorMainText,.6),"--am-c-sc-warning-op50":x(I.value.colorWarning,.5)}));return(k,V)=>e(t).packages.length?(n(!0),c(ae,{key:0},pe(e(t).packages,b=>(n(),c("div",{key:b[0],style:ce(e(F)),class:H(["am-sc",{"am-sc__canceled":b[1].packageData.status==="canceled"}])},[l("div",{class:H(["am-sc__top",s.responsiveClass])},[l("div",ki,[l("div",xi,f(b[1].packageData.name),1),b[1].packageData.end?(n(),c("div",Ci,f(e(w).package_book_expire)+" "+f(e(Me)(b[1].packageData.end.split(" ")[0])),1)):(n(),c("div",Ti,f(`${e(w).package_book_expiration} ${e(w).package_book_unlimited}`),1))]),l("div",{class:H(["am-sc__top-right",s.responsiveClass]),onClick:U=>i(b[0])},[l("div",Pi,f(r(b[1])),1),Li],10,$i)],2),b[1].packageData.end&&b[1].packageData.status!=="canceled"?(n(),c(ae,{key:0},[o(b[1].packageData.end.split(" ")[0])>0?(n(),c("div",wi,[l("span",Si,[Di,de(" "+f(`${e(w).package_deal_expire_in} ${o(b[1].packageData.end.split(" ")[0])} ${e(w).expires_days}, ${e(w).appointments_deal_expire}`),1)])])):C("",!0)],64)):C("",!0)],6))),128)):(n(),W(Ct,{key:1,heading:e(w).no_pack_found,text:e(w).have_no_pack},null,8,["heading","text"]))}});const Oi=l("span",{class:"am-icon-checkmark-circle-full"},null,-1),zi={class:"am-cappa__back"},Bi={class:"am-cappa__heading-left"},Ii={key:0,class:"am-cappa__img-name"},Ei={class:"am-cappa__info"},Ai={class:"am-cappa__name"},ji={key:0,class:"am-cappa__date"},Ni={key:1,class:"am-cappa__date"},Vi={key:2,class:"am-cappa__capacity"},Yi={class:"am-cappa__service-heading"},Ui={class:"am-cappa__service-right"},Wi={key:0,class:"am-cappa__service-img__name"},qi={class:"am-cappa__service-info"},Zi={class:"am-cappa__service-name"},Ri={key:0,class:"am-cappa__service-capacity"},Hi={name:"CabinetPackageAppointmentsList",key:"packagesList"},Ji=Object.assign(Hi,{props:{data:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["goBack","booked","canceled","cancelError"],setup(s,{emit:a}){const t=s;let o=xe(),i=g(()=>o.getters.getSettings),d=Nt({components:{IconComponent:Ae},template:'<IconComponent icon="arrow-left"></IconComponent>'}),{selectedPackageCustomerId:m}=_("packageSelection"),r=g(()=>o.getters["entities/getPackage"](t.data.packageData.id)),p=g(()=>r.value.bookable.find(v=>parseInt(v.service.id)===parseInt(F.value))),u=h(null),y=h(null),D=g(()=>{let v=o.getters["entities/getEntitiesRelations"],T=o.getters["entities/getUnfilteredEmployees"],E=[];if(p.value){if(y.value)Object.keys(v).forEach(z=>{k.value&&k.value.serviceId in v[z]&&v[z][parseInt(k.value.serviceId)].indexOf(y.value)!==-1&&E.push(parseInt(z))});else{let z=[];if(p.value.locations.length)z=p.value.locations.map(_e=>_e.id);else for(let _e in v)p.value.service.id in v[_e]&&(z=z.concat(v[_e][p.value.service.id]));for(let _e in v)p.value.service.id in v[_e]&&z.forEach(je=>{v[_e][p.value.service.id].indexOf(je)!==-1&&E.push(parseInt(_e))})}let J=p.value.providers.length?p.value.providers.map(z=>z.id):T.map(z=>z.id);return T.filter(z=>J.indexOf(z.id)!==-1&&E.indexOf(z.id)!==-1&&(o.getters["entities/getShowHidden"]||z.status==="visible"))}return[]}),$=g(()=>{let v=o.getters["entities/getEntitiesRelations"],T=o.getters["entities/getUnfilteredLocations"],E=[];if(p.value){if(u.value)E=v[u.value][p.value.service.id];else{let z=[];if(p.value.providers.length)z=p.value.providers.map(_e=>_e.id);else for(let _e in v)p.value.service.id in v[_e]&&z.push(parseInt(_e));for(let _e in v)p.value.service.id in v[_e]&&z.indexOf(parseInt(_e))!==-1&&(E=E.concat(v[_e][p.value.service.id]))}let J=p.value.locations.length?p.value.locations.map(z=>z.id):T.map(z=>z.id);return T.filter(z=>J.indexOf(z.id)!==-1&&E.indexOf(z.id)!==-1&&(o.getters["entities/getShowHidden"]||z.status==="visible"))}return[]}),w=g(()=>{let v=[];return Object.keys(t.data.services).forEach(T=>{Object.keys(t.data.services[T].appointments).forEach(E=>{t.data.services[T].appointments[E].appointments.forEach(J=>{v.push(J)})})}),{type:"package",package:r.value,booking:null,bookable:r.value,paymentId:t.data.packageData.payments.length?t.data.packageData.payments[0].id:null,customer:o.getters["auth/getProfile"],packageCustomerId:parseInt(m.value),packageReservations:v,payments:t.data.packageData.payments,price:t.data.packageData.price,tax:t.data.packageData.tax,coupon:t.data.packageData.coupon,discount:t.data.packageData.discount,end:t.data.packageData.end}}),I=h(!1),F=h(null),k=h(null),V=h(null);Fe(()=>{F.value=Object.keys(t.data.services)[0]});function b(v,T,E){let J=0;return Object.keys(v).forEach(z=>{(T===null||parseInt(T)===parseInt(z))&&(J+=v[z].purchaseData[E])}),J}function U(v){return v===1?se.value.appointment_booked:se.value.appointments_booked}function G(v,T=null){let E=v.packageData.sharedCapacity?v.packageData.sharedCount:b(v.services,T,"count"),J=v.packageData.sharedCapacity?v.packageData.sharedTotal:b(v.services,T,"total");return`${J-E}/${J} ${U(J-E)}`}function R(v){F.value=v.paneName}function Q(){let v=o.getters["auth/getProfile"],T=o.getters["cabinet/getTimeZone"]?o.getters["cabinet/getTimeZone"]:"UTC",E={serviceId:parseInt(F.value),group:1,timeZone:o.getters["cabinet/getTimeZone"],page:"cabinet"},J=r.value.bookable.find(z=>parseInt(z.service.id)===parseInt(F.value)).providers.map(z=>z.id);J.length&&(E.providerIds=J),E.locationId=null,V.value=E,k.value={type:"appointment",bookings:[{packageCustomerService:{id:t.data.services[F.value].purchaseData.packageCustomerServiceId},customer:{id:v.id,firstName:v.firstName,lastName:v.lastName,email:v.email,phone:v.phone,countryPhoneIso:v.countryPhoneIso,externalId:v.externalId},customerId:v.id,customFields:null,persons:1,extras:[],deposit:0}],serviceId:F.value,locationId:t.data.services[F.value].purchaseData.locitionId,providerId:t.data.services[F.value].purchaseData.employeeId,isGroup:!0,notifyParticipants:i.value.notifications.notifyCustomers?1:0,payment:null,recurring:[],package:[],timeZone:T===""?Intl.DateTimeFormat().resolvedOptions().timeZone:T,utc:T==="",locale:window.localeLanguage[0]}}function K(v){k.value=null,a("booked",v)}let B=h(!1);function O(){B.value=!0,Ce.post("/packages/customers/"+parseInt(m.value),{status:"canceled"},De(o)).then(()=>{I.value=!1,a("canceled",{message:se.value.package_purchase_canceled})}).catch(v=>{v.response&&a("cancelError",v.response.data)}).finally(()=>{B.value=!1})}function P(v){a("booked",v)}function S(){a("goBack")}let L=_("amCustomize");const A=_("labels"),Z=_("localLanguage");let ne=g(()=>i.value.general.usedLanguages.includes(Z.value)),se=g(()=>{let v=ke(be({},A)),T=L.value.packageAppointmentsList.translations;return T&&Object.keys(T).forEach(E=>{T[E][Z.value]&&ne.value?v[E]=T[E][Z.value]:T[E].default&&(v[E]=T[E].default)}),v});ue("amLabels",se);let Y=g(()=>o.getters["cabinet/getPaymentLinkError"].package),j=h("error"),te=h(se.value.payment_link_error);function ee(){Y.value=!1,o.commit("cabinet/setPaymentLinkError",{value:!1,type:"package"})}function ie(v){let T=ke(be({},A)),E=L.value[v].translations;return E&&Object.keys(E).forEach(J=>{E[J][Z.value]&&ne.value?T[J]=E[J][Z.value]:E[J].default&&(T[J]=E[J].default)}),T}function le(v){return L.value[v].options}let X=_("amColors"),N=g(()=>({"--am-c-cappa-text":X.value.colorMainText,"--am-c-cappa-bgr":X.value.colorMainBgr,"--am-c-cappa-text-op80":x(X.value.colorMainText,.8),"--am-c-cappa-text-op70":x(X.value.colorMainText,.7),"--am-c-cappa-text-op20":x(X.value.colorMainText,.2),"--am-c-cappa-primary":X.value.colorPrimary}));return(v,T)=>{const E=It,J=Et;return n(),c("div",{class:"am-cappa",style:ce(e(N))},[e(Y)?(n(),W(Ee,{key:0,ref:"alertContainer",type:e(j),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:ee,onTriggerClose:ee},{title:M(()=>[Oi,de(" "+f(e(te)),1)]),_:1},8,["type"])):C("",!0),l("div",zi,[q(he,{"custom-class":"am-cappa__back-btn",icon:e(d),type:e(L).packageAppointmentsList.options.backBtn.buttonType,size:"micro",category:"secondary","icon-only":"",onClick:S},null,8,["icon","type"]),l("span",null,f(e(se).back_btn),1)]),l("div",{class:H(["am-cappa__heading",s.responsiveClass])},[l("div",Bi,[l("div",{class:"am-cappa__img",style:ce(e(t).data.packageData.pictureThumbPath?{backgroundImage:`url(${e(t).data.packageData.pictureThumbPath})`}:{})},[e(t).data.packageData.pictureThumbPath?C("",!0):(n(),c("span",Ii,f(e(pt)(e(t).data.packageData.name)),1)),l("span",{class:"am-cappa__img-color",style:ce({backgroundColor:e(t).data.packageData.color})},null,4)],4),l("div",Ei,[l("div",Ai,f(e(t).data.packageData.name),1),e(t).data.packageData.end?(n(),c("div",ji,f(e(se).package_book_expire)+" "+f(e(Me)(e(t).data.packageData.end.split(" ")[0])),1)):(n(),c("div",Ni,f(`${e(se).package_book_expiration} ${e(se).package_book_unlimited}`),1)),Object.keys(e(t).data.services).length>1?(n(),c("div",Vi,f(G(e(t).data)),1)):C("",!0)])]),l("div",{class:H(["am-cappa__heading-right",s.responsiveClass])},[e(i).roles.allowCustomerCancelPackages&&e(t).data.packageData.status!=="canceled"?(n(),W(he,{key:0,category:"danger",size:"small",class:H(["am-cappa__actions",s.responsiveClass]),type:e(L).packageAppointmentsList.options.cancelBtn.buttonType,onClick:T[0]||(T[0]=()=>{me(I)?I.value=!0:I=!0})},{default:M(()=>[de(f(e(se).cancel),1)]),_:1},8,["class","type"])):C("",!0),e(t).data.packageData.status==="approved"&&e(t).data.packageData.price>0?(n(),W(qt,{key:1,"btn-size":"small",class:H(`am-cappa__actions ${s.responsiveClass}`),type:e(L).packageAppointmentsList.options.payBtn.buttonType,reservation:e(w),bookable:e(r)},null,8,["class","type","reservation","bookable"])):C("",!0)],2)],2),q(J,{modelValue:e(F),"onUpdate:modelValue":T[1]||(T[1]=z=>me(F)?F.value=z:F=z),class:"am-cappa__service",onTabClick:R},{default:M(()=>[(n(!0),c(ae,null,pe(Object.keys(e(t).data.services),z=>(n(),W(E,{key:z,name:z},{label:M(()=>[l("div",Yi,f(e(t).data.services[z].purchaseData.name),1)]),default:M(()=>[e(F)===z?(n(),c(ae,{key:0},[l("div",{class:H(["am-cappa__service-top",s.responsiveClass])},[l("div",Ui,[l("div",{class:"am-cappa__service-img",style:ce(e(t).data.services[e(F)].purchaseData.pictureThumbPath?{backgroundImage:`url(${e(t).data.services[e(F)].purchaseData.pictureThumbPath})`}:{})},[e(t).data.services[e(F)].purchaseData.pictureThumbPath?C("",!0):(n(),c("span",Wi,f(e(pt)(e(t).data.services[e(F)].purchaseData.name)),1)),l("span",{class:"am-cappa__service-img__color",style:ce({backgroundColor:e(t).data.services[e(F)].purchaseData.color})},null,4)],4),l("div",qi,[l("div",Zi,f(e(t).data.services[e(F)].purchaseData.name),1),e(t).data.packageData.sharedCapacity?C("",!0):(n(),c("div",Ri,f(G(e(t).data,e(F))),1))])]),e(t).data.packageData.status!=="canceled"?(n(),W(he,{key:0,class:H(["am-cappa__service-book",s.responsiveClass]),size:"small",type:e(L).packageAppointmentsList.options.bookBtn.buttonType,disabled:b(e(t).data.services,e(F),"count")===0,onClick:Q},{default:M(()=>[de(f(e(se).book_now),1)]),_:1},8,["class","type","disabled"])):C("",!0)],2),q(Ht,{"grouped-appointments":e(t).data.services[e(F)].appointments,"page-width":s.pageWidth,"responsive-class":s.responsiveClass,"is-package-booking":!0,"step-key":"packageAppointmentsList",onCanceled:P,onBooked:P},null,8,["grouped-appointments","page-width","responsive-class"])],64)):C("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),q(kt,{loading:e(B),visibility:e(I),title:ie("cancelPackage").cancel_package,description:ie("cancelPackage").confirm_cancel_package,"close-btn-text":ie("cancelPackage").close,"confirm-btn-text":ie("cancelPackage").confirm,"customized-options":le("cancelPackage"),onClose:T[2]||(T[2]=()=>{me(I)?I.value=!1:I=!1}),onConfirm:O},null,8,["loading","visibility","title","description","close-btn-text","confirm-btn-text","customized-options"]),q(Rt,{visibility:e(k)!==null&&!e(k).id,appointment:e(k),employees:e(D),locations:e($),"slots-params":e(V),labels:ie("bookAppointment"),"customized-options":le("bookAppointment"),onClose:T[3]||(T[3]=z=>me(k)?k.value=null:k=null),onSuccess:K,onError:T[4]||(T[4]=()=>{}),onEmployeeSelection:T[5]||(T[5]=z=>me(u)?u.value=z:u=z),onLocationSelection:T[6]||(T[6]=z=>me(y)?y.value=z:y=z)},null,8,["visibility","appointment","employees","locations","slots-params","labels","customized-options"])],4)}}});const Gi=l("span",{class:"am-icon-checkmark-circle-full"},null,-1),Qi={name:"CabinetPackages",key:"packages"},Xi=Object.assign(Qi,{props:{loadBookingsCounter:{type:Number,default:0}},setup(s){const a=s;let t=xe(),o=h(null),i=h(0),d=_("sidebarCollapsed");window.addEventListener("resize",m);function m(){o.value&&(i.value=o.value.offsetWidth)}Te(d,L=>{L?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){i.value=o.value.offsetWidth}Fe(()=>{He(()=>{i.value=o.value.offsetWidth})});let p=g(()=>Pe(i.value)),u=h(null),y=h(!1),D=h("success"),$=h("");function w(){y.value=!1,$.value=""}let I=_("cabinetType");t.commit("cabinetFilters/setDates",vt(I.value));let F=g(()=>t.getters["cabinet/getPackageLoading"]),k=h([]),V=h(null);function b(){let L=t.getters["cabinetFilters/getPackages"],A=t.getters["cabinetFilters/getServices"],Z=t.getters["cabinetFilters/getProviders"],ne=t.getters["cabinetFilters/getLocations"];k.value=K.value.filter(se=>{let Y=t.getters["entities/getPackageEntities"](se[1].packageData.id);return(A.length===0||A.filter(j=>Y.services.includes(j)).length>0)&&(Z.length===0||Z.filter(j=>Y.providers.includes(j)).length>0)&&(ne.length===0||ne.filter(j=>Y.locations.includes(j)).length>0)&&(L.length===0||L.filter(j=>Y.packages.includes(j)).length>0)})}function U(L,A,Z){let ne=0;return Object.keys(L).forEach(se=>{(A===null||parseInt(A)===parseInt(se))&&(ne+=L[se].purchaseData[Z])}),ne}function G(L){let A=U(L.services,null,"count"),Z=U(L.services,null,"total");return Z-A===Z}function R(L){t.commit("cabinet/setPackageLoading",!0);let A=t.getters["cabinet/getTimeZone"],Z=JSON.parse(JSON.stringify(t.getters["cabinetFilters/getPackagesFilters"]));Z.timeZone=A,Z.source="cabinet-"+I.value,Z.activePackages=0,Ce.get("/appointments",bt(Object.assign(De(t),{params:Z}))).then(ne=>{let se={};ne.data.data.availablePackageBookings.forEach(X=>{X.packages.forEach(N=>{N.services.forEach(v=>{v.bookings.forEach(T=>{let E=t.getters["entities/getPackage"](N.packageId);if(E&&(T.packageCustomerId in se||(se[T.packageCustomerId]={packageData:{id:E.id,name:E.name,start:T.start,end:T.end,price:T.price,tax:T.tax,coupon:T.coupon,status:T.status,type:"package",payments:T.payments,sharedCapacity:T.sharedCapacity,sharedTotal:T.total,sharedCount:T.count,discount:0,color:E.color,pictureFullPath:E.pictureFullPath,pictureThumbPath:E.pictureThumbPath},services:{}}),!(v.serviceId in se[T.packageCustomerId].services))){let J=t.getters["entities/getService"](v.serviceId);se[T.packageCustomerId].services[v.serviceId]={appointments:{},purchaseData:{packageCustomerServiceId:T.id,total:T.total,count:T.count,employeeId:T.employeeId,locationId:T.locationId,name:J.name,color:J.color,pictureThumbPath:J.pictureThumbPath}}}})})})});let Y=Ut(ne.data.data.appointments,A);Object.keys(Y).forEach(X=>{Y[X].appointments.forEach(N=>{N.bookings.forEach(v=>{let T=v.packageCustomerService.packageCustomer.id;T in se&&(X in se[T].services[N.serviceId].appointments||(se[T].services[N.serviceId].appointments[X]={date:X,appointments:[]}),se[T].services[N.serviceId].appointments[X].appointments.push(N))})})});let j=Object.entries(se).filter(X=>X[1].packageData.status==="canceled"),te=Object.entries(se).filter(X=>X[1].packageData.status!=="canceled"&&G(X[1])),ee=Object.entries(se).filter(X=>X[1].packageData.status!=="canceled"&&!G(X[1])&&X[1].packageData.end===null),ie=Object.entries(se).filter(X=>X[1].packageData.status!=="canceled"&&!G(X[1])&&X[1].packageData.end!==null).sort((X,N)=>ve(X[1].packageData.end,"YYYY-MM-DD HH:mm:ss").diff(ve(N[1].packageData.end,"YYYY-MM-DD HH:mm:ss"),"minutes"));if(k.value=[...ie,...ee,...te,...j],K.value=[...ie,...ee,...te,...j],!(Z.packages.length||Z.services.length||Z.providers.length||Z.locations.length)){let X=[],N=[],v=[],T=[];k.value.forEach(E=>{let J=t.getters["entities/getPackageEntities"](E[1].packageData.id);X=X.concat(J.services),N=N.concat(J.providers),v=v.concat(J.locations),T=T.concat(J.packages)}),t.dispatch("cabinetFilters/injectServiceOptions",X.filter((E,J,z)=>z.indexOf(E)===J)),t.dispatch("cabinetFilters/injectProviderOptions",N.filter((E,J,z)=>z.indexOf(E)===J)),t.dispatch("cabinetFilters/injectLocationOptions",v.filter((E,J,z)=>z.indexOf(E)===J)),t.dispatch("cabinetFilters/injectPackagesOptions",T.filter((E,J,z)=>z.indexOf(E)===J))}}).catch(ne=>{console.log(ne)}).finally(()=>{t.commit("cabinet/setPackageLoading",!1),L&&"message"in L&&(y.value=!0,$.value=L.message,o.value&&u.value&&setTimeout(function(){Le(o.value,u.value.$el,0,300)},500))})}function Q(L){y.value=!0,$.value=L.message,D.value="error",o.value&&u.value&&setTimeout(function(){Le(o.value,u.value.$el,0,300)},500)}ue("packageSelection",{selectedPackageCustomerId:V});let K=h([]);Te(()=>a.loadBookingsCounter,()=>{R()}),Fe(()=>{R()});let B=g(()=>({list:{template:ye(Mi),props:{packages:k.value,responsiveClass:p.value},handlers:{click:P}},item:{template:ye(Ji),props:{data:V.value?k.value.find(L=>L[0]===V.value)[1]:{},responsiveClass:p.value,pageWidth:i.value},handlers:{goBack:S,booked:R,canceled:R,cancelError:Q}}})),O=h("list");function P(L){V.value=L,O.value="item"}function S(){V.value=null,O.value="list"}return(L,A)=>(n(),c("div",{ref_key:"pageContainer",ref:o,class:"am-cap"},[e(y)?(n(),W(Ee,{key:0,ref_key:"alertContainer",ref:u,type:e(D),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:w,onTriggerClose:w},{title:M(()=>[Gi,de(" "+f(e($)),1)]),_:1},8,["type"])):C("",!0),at(q(yt,{"step-key":"packages","responsive-class":e(p),onChangeFilters:b},null,8,["responsive-class"]),[[ha,e(O)==="list"]]),e(F)?(n(),W(xt,{key:2})):(n(),W(Ie(e(B)[e(O)].template),Ne({key:1},e(B)[e(O)].props,ya(e(B)[e(O)].handlers)),null,16))],512))}});const Ki=l("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),er=l("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),tr=["href"],ar={class:"am-fs-sb__page-wrapper am-fs-sb__page-wrapper__cabinet"},sr=["onClick"],lr={class:"am-fs-sb__page-icon"},or=l("span",{class:"am-icon-arrow-big-right"},null,-1),nr=[or],ir={key:1,class:"am-fs-sb__page-divider"},rr={class:"am-fs-sb__page-inner"},cr=l("div",{class:"am-fs-sb__page-icon"},[l("span",{class:"am-icon-dashboard"})],-1),ur=l("div",{class:"am-fs-sb__page-divider"},null,-1),dr={class:"am-fs-sb__page-inner"},pr=l("div",{class:"am-fs-sb__page-icon"},[l("span",{class:"am-icon-logout"})],-1),mr={class:"am-caph"},_r={class:"am-caph__text"},gr=l("span",{class:"am-icon-menu"},null,-1),fr=[gr],vr={name:"CustomerPanel"},br=Object.assign(vr,{setup(s){const a=lt().cookies,t=xe();let o=g(()=>t.getters["auth/getAuthenticated"]);Te(o,v=>{v&&(t.commit("auth/setNewPassword",""),t.commit("auth/setConfirmPassword",""))});let i=h("customer");ue("cabinetType",i);let d=_("licence"),m=h("capc");ue("originKey",m);let r=h(null),{width:p}=ka(r);ue("containerWidth",p);const u=_("settings"),y=g(()=>u.customizedData&&"capc"in u.customizedData?u.customizedData.capc:Ke.capc);ue("amCustomize",y);const D=h(u.customizedData?u.customizedData.fonts:Ke.fonts);ue("amFonts",D);const $=_("labels"),w=_("localLanguage");let I=g(()=>u.general.usedLanguages.includes(w.value)),F=g(()=>{let v=ke(be({},$));return u.customizedData&&Object.keys(y.value).forEach(T=>{if(T!=="colors"&&y.value[T].translations){let E=y.value[T].translations;Object.keys(E).forEach(J=>{E[J][w.value]&&I.value?v[J]=E[J][w.value]:E[J].default&&(v[J]=E[J].default)})}}),v}),k=g(()=>S.value==="packages"?y.value.packagesList.options:y.value[S.value].options),V=h(!1),b=h(!1);ue("sidebarCollapsed",xa(b));let U=h("");Te(b,v=>{v?setTimeout(()=>{U.value="am-collapsed"},1e3):U.value=""});let G=h(null),R=h(0),Q=g(()=>p.value>480);Fe(()=>{G.value&&setTimeout(()=>{R.value=G.value.offsetHeight},200)});let K=h(null);Te(p,v=>{clearTimeout(K.value),K.value=setTimeout(()=>{b.value=y.value.sidebar.options.toggle.visibility?y.value.sidebar.options.toggle.visibility:v<=600,V.value=v>481?!1:V.value},200)});const B=_("baseUrls");t.dispatch("entities/getEntities",{types:["employees","categories","locations","packages","entitiesRelations","customFields"],licence:"basic",loadEntities:!0,showHidden:!0});const O=_("shortcodeData");let P=g(()=>t.getters.getReady),S=h(O.value.appointments||!O.value.events?"appointments":"events"),L=h({profile:ye(yl)});(O.value.appointments||!O.value.events)&&(L.value.appointments=ye(vi)),(O.value.events||!O.value.appointments)&&(L.value.events=ye(yi)),(O.value.appointments||!O.value.events)&&(d.isPro||d.isDeveloper)&&(L.value.packages=ye(Xi));const A=h([{key:"profile",icon:"user",pageLabel:F.value.my_profile,label:g(()=>y.value.profile.options.lastName.visibility?`${t.getters["auth/getProfile"].firstName} ${t.getters["auth/getProfile"].lastName}`:`${t.getters["auth/getProfile"].firstName}`)}]);(O.value.appointments||!O.value.events)&&A.value.push({key:"appointments",icon:"service",label:F.value.appointments}),(O.value.events||!O.value.appointments)&&A.value.push({key:"events",icon:"star-outline",label:F.value.events}),(O.value.appointments||!O.value.events)&&(d.isPro||d.isDeveloper)&&A.value.push({key:"packages",icon:"shipment",label:F.value.packages}),ue("sidebarSteps",A),Fe(()=>{Z.value=A.value.findIndex(v=>v.key===S.value)});let Z=h(0);function ne(v,T){S.value=v.key,Z.value=T,t.commit("cabinetFilters/setResetFilters")}function se(v){ne(v.step,v.index),t.commit("cabinetFilters/setResetFilters")}function Y(){t.dispatch("auth/logout")}function j(){V.value=!1,Y()}let te=h(0);function ee(){te.value++}ue("bookingsCounterChanger",{bookingsCounterChanger:ee});const ie=_("timeZone");Bt(()=>{if(!u.general.showClientTimeZone){let v=ie.value;a.get("ameliaUserTimeZone")&&(v=a.get("ameliaUserTimeZone")),t.commit("cabinet/setTimeZone",v)}t.getters["cabinet/getTimeZone"]||t.commit("cabinet/setTimeZone",Ze())});let le=g(()=>y.value.colors);ue("amColors",le);let X=g(()=>({"--am-c-primary":le.value.colorPrimary,"--am-c-success":le.value.colorSuccess,"--am-c-error":le.value.colorError,"--am-c-warning":le.value.colorWarning,"--am-c-main-bgr":le.value.colorMainBgr,"--am-c-main-heading-text":le.value.colorMainHeadingText,"--am-c-main-text":le.value.colorMainText,"--am-c-sb-bgr":le.value.colorSbBgr,"--am-c-sb-text":le.value.colorSbText,"--am-c-inp-bgr":le.value.colorInpBgr,"--am-c-inp-border":le.value.colorInpBorder,"--am-c-inp-text":le.value.colorInpText,"--am-c-inp-placeholder":le.value.colorInpPlaceHolder,"--am-c-drop-bgr":le.value.colorDropBgr,"--am-c-drop-text":le.value.colorDropText,"--am-c-btn-prim":le.value.colorBtnPrim,"--am-c-btn-prim-text":le.value.colorBtnPrimText,"--am-c-btn-sec":le.value.colorBtnSec,"--am-c-btn-sec-text":le.value.colorBtnSecText,"--am-c-btn-danger":le.value.colorBtnDanger,"--am-c-btn-danger-text":le.value.colorBtnDangerText,"--am-c-skeleton-op20":x(le.value.colorMainText,.2),"--am-c-skeleton-op60":x(le.value.colorMainText,.6),"--am-c-skeleton-sb-op20":x(le.value.colorSbText,.2),"--am-c-skeleton-sb-op60":x(le.value.colorSbText,.6),"--am-c-scroll-op30":x(le.value.colorPrimary,.3),"--am-c-scroll-op10":x(le.value.colorPrimary,.1),"--am-font-family":D.value.fontFamily,"--am-rad-input":"6px","--am-fs-input":"15px","--am-mw-main":Q.value?b.value?"858px":"1024px":"520px","--am-brad-main":Q.value?"0 0.5rem 0.5rem 0":"0.5rem"})),N=g(()=>({"--am-c-msd-bgr":le.value.colorSbBgr,"--am-c-msd-text":le.value.colorSbText,"--am-c-msd-text-op05":x(le.value.colorSbText,.05),"--am-c-msd-text-op10":x(le.value.colorSbText,.1),"--am-c-msd-text-op60":x(le.value.colorSbText,.6)}));return(v,T)=>(n(),c(ae,null,[D.value.customFontSelected?C("",!0):(n(),c(ae,{key:0},[Ki,er,l("link",{rel:"stylesheet",type:"text/css",href:`${e(B).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,tr)],64)),l("div",{id:"amelia-container",ref_key:"ameliaContainer",ref:r,class:H(["am-cap__wrapper",[{"am-collapsed":e(b)},{"am-auth":!e(o)}]]),style:ce(e(X))},[e(o)?C("",!0):(n(),W(ul,{key:0})),e(o)?(n(),c(ae,{key:1},[e(Q)?(n(),W(Ca,{key:0,class:H(["am-fs-sb",{"am-collapsed":e(b)}]),style:ce({width:e(b)?"72px":"240px",paddingBottom:`${e(R)+16}px`})},{"step-list":M(()=>[l("div",ar,[(n(!0),c(ae,null,pe(A.value,(E,J)=>(n(),c(ae,{key:E.key},[E.key!=="packages"||e(t).getters["entities/getPackages"].length?(n(),c("div",{key:0,class:H(["am-fs-sb__page",{selected:e(S)===E.key}]),onClick:z=>ne(E,J)},[l("div",{class:H(["am-fs-sb__page-inner",{"am-collapsed":e(b)}])},[l("div",lr,[l("span",{class:H(`am-icon-${E.icon}`)},null,2)]),q(Be,{name:"fade"},{default:M(()=>[e(b)?C("",!0):(n(),c("p",{key:0,class:H(["am-fs-sb__page-heading",e(U)])},f(E.label),3))]),_:2},1024),q(Be,{name:"fade"},{default:M(()=>[e(b)?C("",!0):(n(),c("div",{key:0,class:H(["am-fs-sb__page-indicator",e(U)])},nr,2))]),_:1})],2)],10,sr)):C("",!0),J===0?(n(),c("div",ir)):C("",!0)],64))),128))])]),"support-info":M(()=>[l("div",{ref_key:"sidebarFooterRef",ref:G,class:"am-fs-sb__footer"},[l("div",{class:"am-fs-sb__page",onClick:T[0]||(T[0]=E=>me(b)?b.value=!e(b):b=!e(b))},[l("div",rr,[cr,q(Be,{name:"fade"},{default:M(()=>[e(b)?C("",!0):(n(),c("p",{key:0,class:H(["am-fs-sb__page-heading",e(U)])},f(e(F).toggle_sidebar),3))]),_:1})])]),ur,l("div",{class:"am-fs-sb__page",onClick:Y},[l("div",dr,[pr,q(Be,{name:"fade"},{default:M(()=>[e(b)?C("",!0):(n(),c("p",{key:0,class:H(["am-fs-sb__page-heading",e(U)])},f(e(F).log_out),3))]),_:1})])])],512)]),_:1},8,["class","style"])):C("",!0),q(Ta,{"max-width":786,"old-responsive":!1},{header:M(()=>[q(Fa,{ready:e(P)},{default:M(()=>[l("div",mr,[l("div",_r,f(A.value[e(Z)].key==="profile"?A.value[e(Z)].pageLabel:A.value[e(Z)].label),1),e(Q)?C("",!0):(n(),c("div",{key:0,class:"am-caph__menu",onClick:T[1]||(T[1]=()=>me(V)?V.value=!e(V):V=!e(V))},fr)),e(Q)&&e(S)!=="profile"&&e(k).timeZone.visibility?(n(),W(mt,{key:1})):C("",!0),q(ws,{"menu-items":A.value,monitor:e(S),visibility:e(V),"custom-css":e(N),"customized-labels":e(F),position:"right",width:240,"onUpdate:visibility":T[2]||(T[2]=E=>me(V)?V.value=E:V=E),onClick:se,onLogout:j},null,8,["menu-items","monitor","visibility","custom-css","customized-labels"])])]),_:1},8,["ready"])]),step:M(()=>[(n(),W(Ie(e(L)[e(S)]),{class:"am-fs__main-content","load-bookings-counter":e(te)},null,8,["load-bookings-counter"]))]),_:1})],64)):C("",!0)],6)],64))}});var Pr=Object.freeze(Object.defineProperty({__proto__:null,default:br},Symbol.toStringTag,{value:"Module"}));export{Pr as C,Ia as _,Ya as a,cs as b,ds as c,$r as d,Fa as e,ws as f,Tr as g,Cr as h,we as i,Oe as j,wa as k,Vt as u};
